<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Electricity Usage Autocorrelation &#8211; The Training Set.</title>
<meta name="description" content="Examining how hourly electricity demand is predicted by previous demand.">
<meta name="keywords" content="BGE, smart-meters, energy, data, electricity">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/">
<meta name="twitter:title" content="Electricity Usage Autocorrelation">
<meta name="twitter:description" content="Examining how hourly electricity demand is predicted by previous demand.">
<meta name="twitter:creator" content="@jtelszasz">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Electricity Usage Autocorrelation">
<meta property="og:description" content="Examining how hourly electricity demand is predicted by previous demand.">
<meta property="og:url" content="http://localhost:4000/articles/Autocorrelation">
<meta property="og:site_name" content="The Training Set.">





<link rel="canonical" href="http://localhost:4000/articles/Autocorrelation">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="The Training Set. Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://localhost:4000">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://localhost:4000/images/bio-photo.jpg" alt="Justin Elszasz photo" class="author-photo">
					<h4>Justin Elszasz</h4>
					<p>Engineering background, indeterminate foreground.</p>
				</li>
				<li><a href="http://localhost:4000/about/">Learn More</a></li>
				<li>
					<a href="mailto:thetrainingset@gmail.com"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/jtelszasz"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				
				<li>
					<a href="http://linkedin.com/in/justinelszasz"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/jtelszasz"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://localhost:4000/posts/">All Posts</a></li>
				<li><a href="http://localhost:4000/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://localhost:4000/the-work/">The Work</a></li><li><a href="http://localhost:4000/my-elec-use/">My Electricity Use</a></li><li><a href="http://localhost:4000/subscribe/">Subscribe</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://localhost:4000/articles/Autocorrelation" rel="bookmark" title="Electricity Usage Autocorrelation">Electricity Usage Autocorrelation</a></h1>
        
        <h2>May 05, 2014</h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Here’s a quick look using historical data to predict the future.</p>

<p>If the goal is to predict the next hour’s electricity consumption, a good predictor might be the consumption of the hour (or several hours) immediately prior.  One way to assess whether or not this is through the autocorrelation given by:</p>

<center>
<img src="http://latex.codecogs.com/png.latex?R_{h}=\frac{c_{h}}{c_{0}}=\frac{\sum_{t=1}^{N-h}(Y_{t}-\bar{Y})(Y_{t+h}-\bar{Y})}{\sum_{t=1}^{N}(Y_{t}-\bar{Y})^2}  " alt="R_{h}=\frac{c_{h}}{c_{0}}=\frac{\sum_{t=1}^{N-h}(Y_{t}-\bar{Y})(Y_{t+h}-\bar{Y})}{\sum_{t=1}^{N}(Y_{t}-\bar{Y})^2}" />
</center>

<p>This measures the covariance between every point and a particular lag (or number of hours before) with respect to the overall variance.  This is calculated for every possible lag (for 1 hour all the way up to the length of the dataset) and plotted.  If the data were completely random, this would be zero at all time lags.  Again, I’m using the BGE smart meter data for my apartment for January 18 through March 31 of 2014.</p>

<center>
<figure>
  <a href="http://localhost:4000/images/2014-05/Elec_Autocorrelation.png"><img src="http://localhost:4000/images/2014-05/Elec_Autocorrelation.png" /></a>
  <figcaption>Electricity consumption autocorrelation.</figcaption>
</figure>
</center>

<p>Confidence intervals of 95% and 99% are also plotted (solid and dashed horizontal lines, respectively) and so points outside these intervals are statistically significant; that is, the null hypothesis that there is no correlation between the data and its a particular lag is rejected.  For the apartment’s electricity data there is statistically significant from 1 hour lag to approximately 500 hours of lag - the previous 20 days of electricity use are correlated with a typical hour’s elecricity use.</p>

<p>There also appears to be a significant inverse relationship with lag times longer than 600 hours (25 days).  My guess is that this is due to the warming weather between February and March.  This relationship indicates that the electricity consumption for a given hour is typically less than in February - something common sense tells us, but this says that relationship is statistically significant.</p>

<p>If we want to use history as a means for predicting the next hour of consumption, including the entire history would become unwieldy.  To train  model we’d be using an N x N array for training where N is the number of hours for which we’ve been recording data.  For predicting the next hour, we would need a 1 X N vector of all of the N previous hours.  Instead, it would be more computationally efficient if we could reduce the training data set to N x A where A is a small number of strongly correlated indicator hours, say the past 6 hours or so.  To get at this, I’ve plotted a few example lags against the hour’s electricity consumption.  There’s nothing to say that these relationships <em>must</em> be linear, but by plotting the scatter plot and checking the R^2 of the linear fit, it’s clear that for the most part the relationship (at least with immediate history) is linear.</p>

<center>
<figure class="half">
  <a href="http://localhost:4000/images/2014-05/Elec_Lag_1hour.png"><img src="http://localhost:4000/images/2014-05/Elec_Lag_1hour.png" /></a>
  <a href="http://localhost:4000/images/2014-05/Elec_Lag_6hour.png"><img src="http://localhost:4000/images/2014-05/Elec_Lag_6hour.png" /></a>
  <figcaption>Lag plot and linear regression, 1 hour and 6 hour lag.</figcaption>
</figure>

<figure class="half">
  <a href="http://localhost:4000/images/2014-05/Elec_Lag_12hour.png"><img src="http://localhost:4000/images/2014-05/Elec_Lag_12hour.png" /></a>
  <a href="http://localhost:4000/images/2014-05/Elec_Lag_24hour.png"><img src="http://localhost:4000/images/2014-05/Elec_Lag_24hour.png" /></a>
  <figcaption>Lag plot and linear regression, 12 hour and 24 hour lag.</figcaption>


As expected, as the size of the lag increases, the R^2 decreases, meaning the consumption 1 hour before is more relevant than the consumption 24 hours (or more) immediately prior.  If we want to build a predictive model, including the 1 hour lag would be wise.







</figure></center>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://localhost:4000/tags/#BGE" title="Pages tagged BGE" class="tag">BGE</a><a href="http://localhost:4000/tags/#smart-meters" title="Pages tagged smart-meters" class="tag">smart-meters</a><a href="http://localhost:4000/tags/#energy" title="Pages tagged energy" class="tag">energy</a><a href="http://localhost:4000/tags/#data" title="Pages tagged data" class="tag">data</a><a href="http://localhost:4000/tags/#electricity" title="Pages tagged electricity" class="tag">electricity</a></span>
        <span><a href="http://localhost:4000/articles/Autocorrelation" rel="bookmark" title="Electricity Usage Autocorrelation">Electricity Usage Autocorrelation</a> was published on <span class="entry-date date published updated"><time datetime="2014-05-05T00:00:00-04:00">May 05, 2014</time></span></span>
        (revised: <span class="entry-date date modified"><time datetime="2014-12-17">12/17/2014</time></span>)
        <span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
        
      </footer>
    </div><!-- /.entry-content -->
    
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://localhost:4000/articles/Energy-Use-and-Weather" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://localhost:4000/articles/This-Is-What-We-Pay-Officers-Who-Arrested-Freddie-Gray" title="This is How Much We Paid Officers Involved in the Freddie Gray Debacle">This is How Much We Paid Officers Involved in the Freddie Gray Debacle</a></h3>
          <p>Open data reveal one officer earned a $40,000 bonus in FY 2014. <a href="http://localhost:4000/articles/This-Is-What-We-Pay-Officers-Who-Arrested-Freddie-Gray">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://localhost:4000/articles/Thanks-Technically-Baltimore" title="Thanks Technical.ly Baltimore!">Thanks Technical.ly Baltimore!</a></h4>
            <span>Published on April 23, 2015</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://localhost:4000/articles/Baltimore-Police-Dept-OT-and-Bonus-Pay" title="Baltimore Police Department Overtime & Bonuses">Baltimore Police Department Overtime & Bonuses</a></h4>
            <span>Published on April 22, 2015</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Justin Elszasz. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58835878-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

	        

</body>
</html>
