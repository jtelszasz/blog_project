<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Mo Apartment, Mo Problems &#8211; The Training Set</title>
<meta name="description" content="Average daily consumption for the new and old apartments.">
<meta name="keywords" content="BGE, smart-meters, energy, data, electricity, behavior, apartments">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:4000/images/texture-feature-03.jpg">

<meta name="twitter:title" content="Mo Apartment, Mo Problems">
<meta name="twitter:description" content="Average daily consumption for the new and old apartments.">
<meta name="twitter:creator" content="@jtelszasz">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Mo Apartment, Mo Problems">
<meta property="og:description" content="Average daily consumption for the new and old apartments.">
<meta property="og:url" content="http://localhost:4000/articles/Mo-Apartment-Mo-Energy">
<meta property="og:site_name" content="The Training Set">





<link rel="canonical" href="http://localhost:4000/articles/Mo-Apartment-Mo-Energy">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="The Training Set Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://localhost:4000">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://localhost:4000/images/bio-photo.jpg" alt="Justin Elszasz photo" class="author-photo">
					<h4>Justin Elszasz</h4>
					<p>Engineering background, indeterminate foreground.</p>
				</li>
				<li><a href="http://localhost:4000/about/">Learn More</a></li>
				
				<li>
					<a href="http://twitter.com/jtelszasz"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				
				<li>
					<a href="http://linkedin.com/in/justinelszasz"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/jtelszasz"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://localhost:4000/posts/">All Posts</a></li>
				<li><a href="http://localhost:4000/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://localhost:4000/the-work/">The Work</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://texturelovers.com">Texture Lovers</a></div><!-- /.image-credit -->
  <div class="entry-image">
    <img src="http://localhost:4000/images/texture-feature-03.jpg" alt="Mo Apartment, Mo Problems">
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://localhost:4000/articles/Mo-Apartment-Mo-Energy" rel="bookmark" title="Mo Apartment, Mo Problems">Mo Apartment, Mo Problems</a></h1>
        
        <h2>August 01, 2014</h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Here’s a quick comparison of average weekdays and weekends in the new and old apartments.</p>

<p>It would appear that we’ve been using more at the new place, but take a look at the daily totals. </p>

<figure>
  <a href="http://localhost:4000/images/2014-08/Average_Days_New_and_Old_Apts.png"><img src="http://localhost:4000/images/2014-08/Average_Days_New_and_Old_Apts.png" /></a>
  <figcaption>Average hourly electric usage for new and old apartments, March and June.</figcaption>
</figure>

<p>Of course we don’t have apples-to-apples comparisons here.  Of course this is partly due to weather.  The old apartment is shown for March, where we left the thermostat on all day at 65 degrees F so Willow The Cat wouldn’t freeze to death.  At the new apartment, we’re shutting off the thermostat entirely during the day, and at night kicking it on to 75 degrees F.  So for weekdays, we’re consuming much less during the day but evenings are much higher.  </p>

<p>However, the <a href="http://localhost:4000/articles/Guess-What-Time-Justin-Wakes-Up">6am peak when we wake up</a> is also much higher.  I’m sure that this is due to our own dedicated electric water heater at the new place.  Our two showers in the morning plus lighting loads are the 6am peak, while the evening hours are the A/C and any dishwashing we’re doing after dinner.</p>

<p>To do these average day plots I set up a quick function that uses groupby, that way I can reuse this for any time period.</p>

<div class="highlight"><pre><code class="python"><span class="c"># Define a function to calculate average weekday and weekend</span>

<span class="k">def</span> <span class="nf">avg_day</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span><span class="p">):</span>
    <span class="c"># df is pandas df, has &#39;USAGE&#39; and &#39;tempF&#39; fields, indexed by pandas datetime</span>
    <span class="c"># date_range is string for .ix call</span>
    <span class="c"># returns average_weekend and average_weekday</span>
    
    <span class="n">df_dates</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">start_date</span><span class="p">:</span><span class="n">end_date</span><span class="p">]</span>
    
    <span class="c"># First groupby weekday/weekend and hour of day</span>
    <span class="n">weekday_weekend_hour</span> <span class="o">=</span> <span class="n">df_dates</span><span class="o">.</span><span class="n">groupby</span><span class="p">([(</span><span class="n">df_dates</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">dayofweek</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">df_dates</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">dayofweek</span><span class="o">==</span><span class="mi">6</span><span class="p">),</span><span class="n">df_dates</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">hour</span><span class="p">])</span>

    <span class="c"># Calculate an average weekday and average weekend by hour (electricity and outdoor temp)</span>
    <span class="n">average_day</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">weekday_weekend_hour</span><span class="p">[</span><span class="s">&#39;USAGE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span><span class="n">weekday_weekend_hour</span><span class="p">[</span><span class="s">&#39;tempF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()])</span>
    
    <span class="n">average_weekend</span> <span class="o">=</span> <span class="n">average_day</span><span class="p">[</span><span class="bp">True</span><span class="p">]</span>
    <span class="n">average_weekday</span> <span class="o">=</span> <span class="n">average_day</span><span class="p">[</span><span class="bp">False</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">average_weekday</span><span class="p">,</span> <span class="n">average_weekend</span>
</code></pre></div>


      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://localhost:4000/tags/#BGE" title="Pages tagged BGE" class="tag">BGE</a><a href="http://localhost:4000/tags/#smart-meters" title="Pages tagged smart-meters" class="tag">smart-meters</a><a href="http://localhost:4000/tags/#energy" title="Pages tagged energy" class="tag">energy</a><a href="http://localhost:4000/tags/#data" title="Pages tagged data" class="tag">data</a><a href="http://localhost:4000/tags/#electricity" title="Pages tagged electricity" class="tag">electricity</a><a href="http://localhost:4000/tags/#behavior" title="Pages tagged behavior" class="tag">behavior</a><a href="http://localhost:4000/tags/#apartments" title="Pages tagged apartments" class="tag">apartments</a></span>
        <span><a href="http://localhost:4000/articles/Mo-Apartment-Mo-Energy" rel="bookmark" title="Mo Apartment, Mo Problems">Mo Apartment, Mo Problems</a> was published on <span class="entry-date date published updated"><time datetime="2014-08-01T00:00:00-04:00">August 01, 2014</time></span></span>
        (revised: <span class="entry-date date modified"><time datetime="2014-08-01">08/01/2014</time></span>)
        <span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
        
      </footer>
    </div><!-- /.entry-content -->
    
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://localhost:4000/articles/The-New-Pad" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://localhost:4000/articles/Importing-CSV-Files" title="Importing Lots of CSV's">Importing Lots of CSV's</a></h3>
          <p>Code snippet for importing a lot of csv's out of a directory. <a href="http://localhost:4000/articles/Importing-CSV-Files">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://localhost:4000/articles/More-Pointless-Data-Viz" title="Excessive Data Visualization">Excessive Data Visualization</a></h4>
            <span>Published on December 25, 2014</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://localhost:4000/articles/Assessing-System-Performance" title="Assessing Demand-Side Storage System Performance">Assessing Demand-Side Storage System Performance</a></h4>
            <span>Published on November 14, 2014</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Justin Elszasz. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>

	        

</body>
</html>
