<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">The Training Set</title>
<generator uri="https://github.com/mojombo/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="http://localhost:4000/feed.xml" />
<link rel="alternate" type="text/html" href="http://localhost:4000" />
<updated>2014-11-11T08:27:23-05:00</updated>
<id>http://localhost:4000/</id>
<author>
  <name>Justin Elszasz</name>
  <uri>http://localhost:4000/</uri>
  <email></email>
</author>


<entry>
  <title type="html"><![CDATA[Demand Heat Map]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Heat-Map" />
  <id>http://localhost:4000/articles/Heat-Map</id>
  <updated>2014-11-11T00:00:00-00:00</updated>
  <published>2014-11-11T00:00:00-05:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;Opower posted &lt;a href=&quot;http://blog.opower.com/2014/09/ami-data-integration/&quot;&gt;a heat map of hourly electricity demand&lt;/a&gt; that I wanted to replicate for our data. &lt;/p&gt;

&lt;center&gt;
&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-11/my_usage_heatmap.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-11/my_usage_heatmap.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Hourly heat map of our electricity usage.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;This makes changes in hourly trends over the course of the year readily apparent, and even highlights differences day to day.  The 6am/7am peak is pretty clear, as are the evening hours in the summer.  Between midnight a 4am, the usage is clearly higher (deeper yellow) in the summer as well due to AC load.&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Heat-Map&quot;&gt;Demand Heat Map&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on November 11, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Storage Model Details]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Storage-Model-Details" />
  <id>http://localhost:4000/articles/Storage-Model-Details</id>
  <updated>2014-10-09T00:00:00-00:00</updated>
  <published>2014-10-09T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;This post fills in some more details of the &lt;a href=&quot;http://localhost:4000/articles/Intro-To-Storage-Model&quot;&gt;demand-side storage model&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In the last post I presented a flow chart of how the logic works but didn’t give a diagram of what the physical system might look like.  That’s below.&lt;/p&gt;

&lt;center&gt;
&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-10/physical_system.jpg&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-10/physical_system.jpg&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Demand-side storage physical system.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;I’ve illustrated the switch as being a separate component so we can see that electricity could bypass actually being inverted and stored (electricity from the grid sometimes goes directly to the demand).  In reality, the inverter/switch/charge controller would be one system.  This unit and the batteries would be the initial costs for the system.&lt;/p&gt;

&lt;h2 id=&quot;model-parameters&quot;&gt;Model Parameters&lt;/h2&gt;

&lt;p&gt;For electricity going straight to serve demand (not being stored first), there are essentially no additonal losses.  However, batteries only accept DC electricity, so we need an inverter to turn the AC off the grid to DC and back.  There are losses associated with this conversion, and the batteries themselves are lossy.  For now I’ve set these efficiencies as constants, but implemented them in functions so they could in the future get more sophisticated modeling (charging efficiency for batteries is dependent on depth of charge).  The nominal efficiency values are taken from &lt;a href=&quot;http://www.amazon.com/Renewable-Efficient-Electric-Power-Systems/dp/0471280607/ref=sr_1_2?ie=UTF8&amp;amp;qid=1412769771&amp;amp;sr=8-2&amp;amp;keywords=renewable+and+efficient+electric+power+systems&quot;&gt;Renewable and Efficient Electric Power Systems by Gilbert Masters&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;inverter_efficiency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;direction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;direction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;charging&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;eff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;85&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;direction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;discharging&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;eff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;85&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eff&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;battery_efficiency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;direction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;direction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;charging&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;eff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;85&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;direction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;discharging&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;eff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;85&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eff&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;There are also several other system parameters that need to be initialized, including the size of the storage, costs, etc.  In future analyses these variables can be varied to assess the effects on costs and energy.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;inverter_controller_cost&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2000.&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# ballpark&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;storage_cost_perkWh&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;200.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.2&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# cost per kWh; amazon.com lead-acid deep cycle&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;storage_size_kWh&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;9.&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# storage size in kWh&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;P_max_charge&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;100.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1000.&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# C/3 charge rate at 12 V (converted to kW)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;E_min_depth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.2&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# maximum depth of discharge in percent&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;E_min&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;E_min_depth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;storage_size_kWh&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;results&quot;&gt;Results&lt;/h2&gt;

&lt;p&gt;Once the model has calculated all the energy flows for each hour over the course of the year, I calculate a set of key properties of the system behavior.  These results are shown in the table below.  These are the characteristics I’ll be interested in as the system parameters described above are varied (though I may modify this set).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;’% Peak Demand Battery’: Percent of the total peak demand over the year served from the battery&lt;/li&gt;
  &lt;li&gt;’% Peak kWh Shaved’: Percent of the total demand during peak hours removed from the grid&lt;/li&gt;
  &lt;li&gt;’% Purchased During Off-Peak’: Percent of annual electricity purchased during off-peak hours&lt;/li&gt;
  &lt;li&gt;’% Purchased During Peak’: Percent of annual electricity purchased during peak hours&lt;/li&gt;
  &lt;li&gt;‘Annual System Eff’: Total annual demand divided by total annual electricity purchased&lt;/li&gt;
  &lt;li&gt;‘Annual Var Cost’: Annual electricity cost&lt;/li&gt;
  &lt;li&gt;‘Hours Battery Depleted’: Number of hours in the year that battery is drained to maximum depth of discharge&lt;/li&gt;
  &lt;li&gt;‘Hours Battery Full’: Number of hours in the year that battery is fully charged&lt;/li&gt;
  &lt;li&gt;‘Hours on Battery Only’: Number of hours in the year that demand is served by battery alone&lt;/li&gt;
  &lt;li&gt;‘Initial Cost’: Initial system cost (inverter + batteries)&lt;/li&gt;
  &lt;li&gt;‘Peak kWh Shaved’: Total electricity during peak hours removed from the grid&lt;/li&gt;
  &lt;li&gt;‘Total kWh Purchased’: Total annual electricity purchased&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Below are some initial values from the simulation with a storage size of 9 kWh.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;   &lt;span class=&quot;s&quot;&gt;&amp;#39;% Peak Demand Battery&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.62841144933029902&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;% Peak kWh Shaved&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.54435814423603923&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;% Purchased During Off-Peak&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.90852312473716113&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;% Purchased During Peak&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.091476875262838833&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;Annual System Eff&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.93101271339465896&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;Annual Var Cost&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;572.33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;Hours Battery Depleted&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1087&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;Hours Battery Full&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1863&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;Hours on Battery Only&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1169&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;Initial Cost&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3500.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;Peak kWh Shaved&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;979.38848750000284&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&amp;#39;Total kWh Purchased&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;8961.5382045414281&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;For these initial values, what stood out to me was that I removed 54% of the residence’s annual peak demand from the grid (this is the ‘% Peak kWh Shaved’).  This is the reason utilities might want to think about incentivizing residential customers to purchase grid-tied battery systems such as this (beyond just the time-of-use-pricing incentive itself).  I should say that the current model is agnostic to exactly which peak hours load is being shaved from - it just uses the battery first until it’s depleted and then switches to grid during peak hours.  Utilities would want to be a bit more sensitive to this, since their peak time-of-use currently starts at 10am weekdays in the summer but the actual “peak” won’t hit until around 4pm.  In the current model I’ve created, the battery is used up first so I wouldn’t be shaving peak load at 4pm.  This could be addressed with some logic that is a bit more clever than what I’ve currently got.&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Storage-Model-Details&quot;&gt;Storage Model Details&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on October 09, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Intro to Storage Model]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Intro-To-Storage-Model" />
  <id>http://localhost:4000/articles/Intro-To-Storage-Model</id>
  <updated>2014-09-23T00:00:00-00:00</updated>
  <published>2014-09-23T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;Buying lead-acid batteries and switching to one of &lt;a href=&quot;http://localhost:4000/articles/BGE-Pricing&quot;&gt;BGE’s time-of-use pricing plans&lt;/a&gt; may be a very good idea indeed.&lt;/p&gt;

&lt;p&gt;BGE (and many other utilities in the U.S.) are now offering a time-of-use pricing plan in which the price you pay for electricity depends on what time of day or season you are purchasing it.  This is one of the so-called “demand-side strategies” that could help utilities reduce peak loads and prevent blackouts.  In a &lt;a href=&quot;http://localhost:4000/articles/Should-I-Switch-To-TOU-Pricing&quot;&gt;previous post&lt;/a&gt;, I looked at whether it would make financial sense for me to switch over to one of these plans.&lt;/p&gt;

&lt;p&gt;One can imagine taking further advantage of these plans by purchasing most or all electricity during off-peak (cheap) hours without having to buy much or any during peak hours.  In order to explore how this might work and how beneficial it would be, I built a model in Python that simulates the hourly energy flows for a home with lead-acid battery storage.&lt;/p&gt;

&lt;p&gt;There are two sources of data that drive the model.  First, I’ve used one of the &lt;a href=&quot;http://localhost:4000/articles/Feeding-The-Data-Monster&quot;&gt;Green Button sample data files&lt;/a&gt;, specifically the one for an inland, single-family residence.  This is an hourly electricity demand profile for the whole residential building for all of 2011.  Second, I’ve again used &lt;a href=&quot;http://localhost:4000/articles/BGE-Pricing&quot;&gt;BGE’s time-of-use pricing schemes&lt;/a&gt; to determine peak hours and costs.  Some of the ideas are based on &lt;a href=&quot;http://sel.columbia.edu/matlab-assignment-1&quot;&gt;a Matlab assignment I worked on in grad school&lt;/a&gt;.  While I no longer have access to the top tier journals (Elsevier is a capitalist racket), I did find a couple papers &lt;a href=&quot;https://www.thlab.net/wp-content/uploads/publications/pub_19.pdf&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;http://www.ecs.umass.edu/~irwin/smartcharge.pdf&quot;&gt;here&lt;/a&gt; that are using similar algorithms.&lt;/p&gt;

&lt;p&gt;I’ve drawn out a flow chart to show how the model works.  During off-peak times, the demand is served directly from the grid and if the battery isn’t full, extra energy is purchased to charge the battery (there is a maximum rate at which this can occur).  During peak times, energy is first used out of the battery to serve the demand.  Only when the battery is drained (to an acceptable charge level, say 30%) is energy then purchased from the grid to serve demand directly.  No energy is purchased to charge the battery during peak hours.&lt;/p&gt;

&lt;center&gt;
&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-09/Demand-Side Storage Model Flow Chart.jpg&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-09/Demand-Side Storage Model Flow Chart.jpg&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Flow chart for storage simulation.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;If seeing the logic implemented in code would help, it’s below.  I’m not going to put all those functions below as well, needless to say they assign the proper values at each hour.  You could also get them from me on &lt;a href=&quot;https://github.com/jtelszasz/demandside_storage&quot;&gt;Github&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;USAGE&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])):&lt;/span&gt;

        &lt;span class=&quot;c&quot;&gt;# If at the end of the time series, break out&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;USAGE&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;

        &lt;span class=&quot;c&quot;&gt;# Peak hours operation&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;period&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;peak&amp;#39;&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;period&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;int&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;

            &lt;span class=&quot;c&quot;&gt;# If there is enough available in the battery, use it first&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;storage_available&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;E_min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;USAGE&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;peak_battery_only&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;c&quot;&gt;# Otherwise, use up remainder in battery and then buy from grid&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;peak_battery_and_grid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;c&quot;&gt;# Off-peak hours operation&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;

            &lt;span class=&quot;c&quot;&gt;# If the battery isn&amp;#39;t full...&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;storage_available&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;storage_size_kWh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;

                &lt;span class=&quot;c&quot;&gt;# ... top off the battery if it is nearly full...&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;storage_size_kWh&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;storage_available&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;P_max_charge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offpeak_store_to_cap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                
                &lt;span class=&quot;c&quot;&gt;# ... otherwise, charge as much as possible in one hour.&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;                    
                    &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offpeak_store_partial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            
            &lt;span class=&quot;c&quot;&gt;# If the battery is full, then it isn&amp;#39;t necessary to purchase extra.&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;                
                &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;offpeak_battery_full&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In the plot below, I’ve shown the behavior of the system for a typical summer day.  Peak hours are shaded.  As you can see, during off-peak hours additional energy is purchased in order to recharge the battery.  During peak hours, the battery is discharged preferentially before purchasing any peak-hour electricity in order to minimize cost.&lt;/p&gt;

&lt;center&gt;
&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-09/Daily_Energy_State_13-July-2011.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-09/Daily_Energy_State_13-July-2011.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Model behavior for summer weekday, with peak period shaded in gray.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;In the above plot there are two energy flows from the grid - one going to serve demand directly and the other to storage.  (There are actually three shown since I separate peak from off-peak, but you get the idea.)  To make a bit clearer how much energy is being purchased at each hour, I’ve summed those two quanities and plotted below.  Clearly in the off-peak hours, a bit extra is being purchased to charge the batteries.  During the first part of the peak period, nothing has to be purchased from the grid since the battery is serving the demand.  Once that is depleted, energy has to be purchased during the remainder of the peak period.&lt;/p&gt;

&lt;center&gt;
&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-09/Daily_Energy_Purchased_13-July-2011.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-09/Daily_Energy_Purchased_13-July-2011.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Amount of energy purchased in storage model, with peak period shaded in gray.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;It’s important to remember that the actual quantity of killowatt-hours of electricity purchased over the course of the year isn’t different than without storage, it’s just being purchased from the grid at different hours.  The consumer doesn’t need to modify their gluttonous behavior in order to make this work.  The benefit to the consumer is saving money, and the benefit to the utility is shaving peak loads.  &lt;/p&gt;

&lt;p&gt;A bunch of questions are already popping up in my head:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;What is the payback period for the battery system?&lt;/li&gt;
  &lt;li&gt;How do the size of the battery and the peak-off-peak cost differential affect the payback period?&lt;/li&gt;
  &lt;li&gt;What percent of hours/energy over the course of the year come through the storage system as opposed to directly from grid?&lt;/li&gt;
  &lt;li&gt;How much storage is needed so that peak hour electricity is never purchased and how much does this cost?  What is the payback period?&lt;/li&gt;
  &lt;li&gt;How does the cost of the system change with percent of peak-hour demand served by storage?&lt;/li&gt;
&lt;/ul&gt;

  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Intro-To-Storage-Model&quot;&gt;Intro to Storage Model&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on September 23, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Summer Updates]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Summer-Update" />
  <id>http://localhost:4000/articles/Summer-Update</id>
  <updated>2014-09-22T00:00:00-00:00</updated>
  <published>2014-09-22T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;It’s been a bit.  Work got busy, I got stalled and needed an IDE, and I developed a new model.&lt;/p&gt;

&lt;p&gt;I didn’t have much time over the summer for this stuff.  My real job got pretty busy.  You don’t care about that though.&lt;/p&gt;

&lt;p&gt;I did get a bit stalled.  As I’ve discussed previously, I’ve used iPython notebooks &lt;a href=&quot;http://localhost:4000/the-work&quot;&gt;quite a bit&lt;/a&gt; for conducting analyses.  These only got me so far.  I’ve been working on a demand-side storage model to figure out how to take advantage of time-of-use pricing now available from utility companies.  While the notebooks work great for documenting analyses and creating plots, building a model is nearly impossible with them.  They aren’t really useful if you need multiple functions and scripts.  I was encountering bugs early on in building the model and couldn’t fix them.  It was frustrating.&lt;/p&gt;

&lt;p&gt;This type of scientific computing really calls for an integrated development environment, or IDE.  It’s the one thing I’ve been missing since starting in with Python in lieu of Matlab.  An IDE gives you an interactive console, debugging capabilities, and an editor all in one program.  After reading a bit online, it seemed the two big ones for Python were &lt;a href=&quot;http://www.eclipse.org&quot;&gt;Eclipse&lt;/a&gt; and &lt;a href=&quot;http://www.jetbrains.com/pycharm&quot;&gt;Pycharm&lt;/a&gt;.  I started with Eclipse.  I couldn’t for the life of me get it working, something about the external libraries I was using wasn’t getting set up right.  I tried every way imaginable, but this was as frustrating as the original bugs in my code.  I switched to Pycharm, and pretty quickly was up and running.&lt;/p&gt;

&lt;p&gt;Long story short, with an IDE in hand I found my bugs pretty quickly and finished building the model over a weekend.  I definitely recommend Pycharm or another IDE (even trying Eclipse, if you can get it working) for anything more complicated than simple models or exploratory data analysis.  You could even write all your functions and scripts for a model in an IDE and then switch to notebooks for analysis and results of the model.&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Summer-Update&quot;&gt;Summer Updates&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on September 22, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Should I Switch to Time-of-Use Pricing?]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Should-I-Switch-to-TOU-Pricing" />
  <id>http://localhost:4000/articles/Should-I-Switch-to-TOU-Pricing</id>
  <updated>2014-08-12T00:00:00-00:00</updated>
  <published>2014-08-12T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;Now that I’ve got BGE’s available &lt;a href=&quot;http://localhost:4000/articles/BGE-Pricing&quot;&gt;residential time-of-use plans&lt;/a&gt;, I can evaluate whether I would save money by switching to one.&lt;/p&gt;

&lt;p&gt;At each hour, I multiply the cost of electricty by the electricity usage for that hour.  To give an apples-to-apples comparison, I’m using the current 2014-2015 rates and assuming there weren’t any rate changes.  Also, I’m only looking at the actual cost of the commodity, not all the fees and rates (“riders”) that get tacked on.  Those additional costs add up to about 40% of your electricity bill, but since they’re not affected by the rate being charged for the electricity they’d be the same for each plan.  (In fact there was a change at on June 1, 2014, and there always will be changes.)  Again, the plans are “R” (basic), “RL” (time-of-use), and “EV” (aggressive time-of-use for electric vehicle owners).  The plot below shows the savings for the “RL” and “EV” plans as compared to what I would have paid with the “R” plan.&lt;/p&gt;

&lt;center&gt;
&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-08/My_Cost_Savings_TOU_Pricing.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-08/My_Cost_Savings_TOU_Pricing.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Cost savings in U.S. dollars on monthly electricity bill compared to BGE residential &quot;R&quot; plan.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;As a sanity check, the actual electricity cost for July on the “R” plan matches pretty closely what’s actually on our bill for July.  The bill is for 670 kWh at $0.08857/kWh for a total electricity supply cost of $59.34.  My hourly data shows 671.6 kWh usage for July (not sure why there is a difference here from the bill) and with the regular “R” plan at $.08975/kWh the supply cost would have been $57.87.  (As a sidenote, I’m unclear as to what what the difference is between the $.08857/kWh cost that is billed and the $.08975/kWh cost that is listed as the summer kWh prices as of June 1, 2014. &lt;a href=&quot;http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Rates%20Information%20Documents/POLR_Rates_PTC_MiscCharges.pdf&quot;&gt;This&lt;/a&gt; lists both of those figures, but footnote 1 in the table in the upper right table doesn’t really explain the adjustment that well.)&lt;/p&gt;

&lt;p&gt;In terms of savings with dynamic pricing plans, we’d pretty clearly benefit during the summer months.  At the new place during the week, we shut pretty much everything off during the day and only use air conditioning at night.  Moreover, our water heating is electric which leads to much higher peak electricity demands during early mornings and late evenings (particularly in the mornings when we shower).  We’d therefore be taking advantage of the cheaper electricity prices during off-peak hours.  At the old place our heat is part (large part) of the electricity load and during the winter and spring months, our thermostat was operational most hours of most days, and so there are less opportunities for savings since our load isn’t skewed towards off-peak hours.  Shown below again is our typical usage at the old (March 2014) and new (June 2014) apartments (original post is &lt;a href=&quot;http://localhost:4000/articles/Mo-Apartment-Mo-Energy&quot;&gt;here&lt;/a&gt;).  &lt;/p&gt;

&lt;center&gt;
&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-08/Average_Days_New_and_Old_Apts.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-08/Average_Days_New_and_Old_Apts.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Cost savings in U.S. dollars on monthly electricity bill compared to BGE residential &quot;R&quot; plan.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;Shown below is the same monthly savings analysis, this time for the &lt;a href=&quot;http://localhost:4000/articles/BGE-Pricing&quot;&gt;Green Button sample data&lt;/a&gt; for an inland single family residence.&lt;/p&gt;

&lt;center&gt;
&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-08/GB_Cost_Savings_TOU_Pricing.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-08/GB_Cost_Savings_TOU_Pricing.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Cost savings in U.S. dollars on monthly electricity bill compared to BGE residential &quot;R&quot; plan.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;The total annual savings for the sample set would be $27.23 for the “RL” plan compared to the regular “R” plan, and $60.25 for the “EV” plan.  These aren’t large chunks, but I think that’s probably by design.  BGE doesn’t want to lose an excessive amount of revenue by having people switch over to dynamic pricing plans.  At the same time, providing some incentive to switch, especially for electric vehicle owners (mind you this would be a different analysis), makes for a more reliable grid during the peak hours of the summer months by shaving or shifting load.&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Should-I-Switch-to-TOU-Pricing&quot;&gt;Should I Switch to Time-of-Use Pricing?&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on August 12, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[BGE Residential Pricing Plans]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/BGE-Pricing" />
  <id>http://localhost:4000/articles/BGE-Pricing</id>
  <updated>2014-08-03T00:00:00-00:00</updated>
  <published>2014-08-03T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;A quick blurb on a couple of pieces of the demand-side storage puzzle I’m working on.&lt;/p&gt;

&lt;p&gt;First, turns out I’m going to use the Green Button sample data that I &lt;a href=&quot;http://localhost:4000/articles/feeding-the-data-monster&quot;&gt;previously found&lt;/a&gt;.  They have &lt;a href=&quot;http://services.greenbuttondata.org/sample-data.html&quot;&gt;several of these datasets posted&lt;/a&gt; that may be interesting for comparison later.  It took an embarassing amount of time to sort out my first time parsing an XML file.  Word of advice for you data/Python peoples: don’t use ElementTree, I used BeautifulSoup and it was much simpler.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-08/Green_Button_Sample_Inland_Single_Family_Daily.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-08/Green_Button_Sample_Inland_Single_Family_Daily.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Green Button sample hourly data for inland single family residence, resampled to daily.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Definitely nice to have a full year worth of clean data.  You can also clearly see the bump up in summer usage from A/C loads.&lt;/p&gt;

&lt;p&gt;In sorting out the demand-side storage question, I also took a look at what pricing schemes BGE has on offer.  They currently have the normal &lt;a href=&quot;http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Services%20Rates%20and%20Tariffs/P3_SCH_R.pdf&quot;&gt;residential plan (“R”)&lt;/a&gt;, a &lt;a href=&quot;http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Services%20Rates%20and%20Tariffs/P3_SCH_RL.pdf&quot;&gt;residential time-of-use, or TOU, plan (“RL”)&lt;/a&gt;, and a &lt;a href=&quot;http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Services%20Rates%20and%20Tariffs/ScheduleEV.pdf&quot;&gt;plan for electric vehicle customers (“EV”)&lt;/a&gt;.  All of the actual costs for peak, off-peak, and intermediate are found &lt;a href=&quot;http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Services%20Rates%20and%20Tariffs/Rdr_1.pdf&quot;&gt;here&lt;/a&gt;.  Obviously, there are a proverbial shit-ton of other nickel-and-dime tariffs, but since they’re paid per kilowatt-hour and aren’t tied to the actual price of electricity itself.  I’m assuming for the sake of comparison that the total number of kilowatt-hours you use is independent of the pricing plan you have. &lt;/p&gt;

&lt;p&gt;Here’s what the three pricing plans look like for weekdays in summer and non-summer periods.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-08/BGE_Pricing_Summer.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-08/BGE_Pricing_Summer.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;BGE residential pricing plans, summer weekday.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-08/BGE_Pricing_Non-Summer.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-08/BGE_Pricing_Non-Summer.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;BGE residential pricing plans, non-summer weekday.&lt;/figcaption&gt;
&lt;/figure&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/BGE-Pricing&quot;&gt;BGE Residential Pricing Plans&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on August 03, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Mo Apartment, Mo Problems]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Mo-Apartment-Mo-Energy" />
  <id>http://localhost:4000/articles/Mo-Apartment-Mo-Energy</id>
  <updated>2014-08-01T00:00:00-00:00</updated>
  <published>2014-08-01T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;Here’s a quick comparison of average weekdays and weekends in the new and old apartments.&lt;/p&gt;

&lt;p&gt;It would appear that we’ve been using more at the new place, but take a look at the daily totals. &lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/2014-08/Average_Days_New_and_Old_Apts.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/2014-08/Average_Days_New_and_Old_Apts.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Average hourly electric usage for new and old apartments, March and June.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Of course we don’t have apples-to-apples comparisons here.  Of course this is partly due to weather.  The old apartment is shown for March, where we left the thermostat on all day at 65 degrees F so Willow The Cat wouldn’t freeze to death.  At the new apartment, we’re shutting off the thermostat entirely during the day, and at night kicking it on to 75 degrees F.  So for weekdays, we’re consuming much less during the day but evenings are much higher.  &lt;/p&gt;

&lt;p&gt;However, the &lt;a href=&quot;http://localhost:4000/articles/Guess-What-Time-Justin-Wakes-Up&quot;&gt;6am peak when we wake up&lt;/a&gt; is also much higher.  I’m sure that this is due to our own dedicated electric water heater at the new place.  Our two showers in the morning plus lighting loads are the 6am peak, while the evening hours are the A/C and any dishwashing we’re doing after dinner.&lt;/p&gt;

&lt;p&gt;To do these average day plots I set up a quick function that uses groupby, that way I can reuse this for any time period.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# Define a function to calculate average weekday and weekend&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;avg_day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end_date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# df is pandas df, has &amp;#39;USAGE&amp;#39; and &amp;#39;tempF&amp;#39; fields, indexed by pandas datetime&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# date_range is string for .ix call&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# returns average_weekend and average_weekday&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;df_dates&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end_date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    
    &lt;span class=&quot;c&quot;&gt;# First groupby weekday/weekend and hour of day&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;weekday_weekend_hour&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df_dates&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;groupby&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df_dates&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dayofweek&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df_dates&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dayofweek&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df_dates&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Calculate an average weekday and average weekend by hour (electricity and outdoor temp)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;average_day&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DataFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekday_weekend_hour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;USAGE&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekday_weekend_hour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;tempF&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()])&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;average_weekend&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;average_day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;average_weekday&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;average_day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;average_weekday&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;average_weekend&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Mo-Apartment-Mo-Energy&quot;&gt;Mo Apartment, Mo Problems&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on August 01, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[The New Pad]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/The-New-Pad" />
  <id>http://localhost:4000/articles/The-New-Pad</id>
  <updated>2014-07-31T00:00:00-00:00</updated>
  <published>2014-07-31T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;Steph and I moved on May 23.  &lt;/p&gt;

&lt;p&gt;I didn’t manage to grab the data for the last three weeks of May before changing apartments (and therefore BGE accounts), so I missed out on those three weeks of data.  However, we’ve now been there just over two months and so we’ve got some A/C load data to work with.&lt;/p&gt;

&lt;p&gt;The differences in the data are pretty staggering.  One issue is that we moved at the beginning of summer so our previous apartment with electric resistance heating has all the heating loads and the new apartment with central A/C has all the cooling loads.  The rest of the differences are described below.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/New-Old-TS.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/New-Old-TS.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Time series of hourly electricity consumption and outdoor temperature for new and old apartments.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/New-Old-Elec-Temp.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/New-Old-Elec-Temp.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Scatter plot of hourly electricity consumption and outdoor temperature for new and old apartments.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;physical-differences-in-apartments&quot;&gt;Physical Differences in Apartments&lt;/h3&gt;

&lt;p&gt;Our old and new apartments are less than half a mile apart on the same street that runs north and south (St. Paul Street in Baltimore).  There are some important differences of note between the two apartments.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Size&lt;/strong&gt;. The new apartment is much larger in floor area, and has ceilings that appear even higher (though I didn’t take measurements at the old apartment).  In addition to large living room and bedroom, the new apartment has two bathrooms, a much larger kitchen and attached dining space, and a large foyer.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Building Envelope and Fenestration&lt;/strong&gt;. The building itself is still row style, so our exterior exposure is limited to the front of the building and the back.  The old apartment only had exposure in the rear to a fire escape corridor down the center of the building, not to the very rear of the building.  Our new apartment has practically floor to ceiling windows in the front and back.  The new apartment windows are less than 10 years old, where the windows from the last apartment were original single pane and were considerably drafty.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Space Heating&lt;/strong&gt;.  Space heating at the old apartment was provided by electric resistance heating in two zones (living room and bedroom) from ductless split A/C units (the A/C compressor failed on the living room zone).  This means that the electricity data I’ve been using for the old apartment include heating loads.  The new apartment has an &lt;a href=&quot;http://www.commercial.carrier.com/commercial/hvac/product_technical_literature/1,3069,CLI1_DIV41_ETI4922_PRD694,00.html&quot;&gt;80,000 Btu/h input natural gas-fired central furnace&lt;/a&gt;.  We’re lucky enough that it’s a condensing furnace (efficient enough that flue gases cool below their condensing point) with an AFUE of 92.1%. The new data will not include heating loads since this is gas-fired, and the only information we’d have on gas use would be monthly.  We moved in at the end of May so there haven’t been any heating loads yet.  &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Space Cooling&lt;/strong&gt;.  The compressor for the ductless split A/C in the living room failed, and they were cheapskates and replaced it with a window unit.  An 11,000 Btu/h output unit for a family room and kitchen with high ceilings and drafty single pane windows.  In the new apartment, we have central A/C. (&lt;a href=&quot;http://www.commercial.carrier.com/wcs/proddesc_display/0,2733,CLI1_DIV41_ETI4926_NBD_PRD1311,00.html&quot;&gt;This&lt;/a&gt; is the evaporator coil, I haven’t looked closely at the compressor outside yet.)  In both cases, we shut the A/C off during the day, and generally set the thermostat to 75 degrees Fahrenheit when we’re home in evenings and on weekends.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Water Heating&lt;/strong&gt;. In our previous apartment, hot water was included.  In the new apartment, we have a dedicated &lt;a href=&quot;http://products.geappliances.com/ApplProducts/Dispatcher?REQUEST=SpecPage&amp;amp;Sku=GE38S06AAG&quot;&gt;38-gallon electric water heater&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Lighting&lt;/strong&gt;. There are many more light fixtures in the new apartment, though the vast majority use compact florescents. The former living room had only the light (incandescents) from a ceiling fan, while the new living room has 6 recessed lights and a ceiling fan light.  Additionally, there’s a ceiling fan with chandelier in the foyer, 5 recessed ceiling lights in the kitchen and dining room, along with halogen lighting underneath the cabintery in the kitchen.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Appliances&lt;/strong&gt;.  The previous aparment had only the basics - a refrigerator, microwave (ours, and small), and gas oven range. Our new apartment additionally has a dishwasher and in-aparment laundry washer and dryer.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Usage&lt;/strong&gt;.  Generally, our schedules haven’t really changed.  Like I mentioned previously, we shut the A/C off during the day, and only really use it in the evenings (after 7pm or so) and on weekends and only set it to 75 degrees Fahrenheit.&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/The-New-Pad&quot;&gt;The New Pad&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on July 31, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Feeding the Data Monster]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Feeding-The-Data-Monster" />
  <id>http://localhost:4000/articles/Feeding-The-Data-Monster</id>
  <updated>2014-07-31T00:00:00-00:00</updated>
  <published>2014-07-31T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;Scouring the internetz for some data.&lt;/p&gt;

&lt;p&gt;There are a few research questions that I’d like to dig into but I haven’t quite found the right data yet for them.  Ideally I would use our apartment data, but I need at least some summer data (early June won’t count) and we actually just moved apartments.  There are some important differences between the previous and current apartment - namely central AC, larger but less leaky windows, a much larger floor plan, a dishwasher, and a dedicated apartment electric water heater.  &lt;/p&gt;

&lt;p&gt;I’ve done some digging to come up with some other candidate datasets, though this is by no means comprehensive.  I’m mainly looking for at least a year worth of hourly electricity data (or finer scale that could be resampled) for a household or apartment with moderate or high summer air conditioning loads. A lot of the publicly available electricity usage datasets I’ve found have been geared toward non-invasive appliance load monitoring (NIALM) research - test data for algorithms that can breakout appliance end uses based on the electricity signatures.  Generally these are very high frequency (sub-minute time scales) but cover much shorter spans than needed (really a full year).  Hopefully this compilation is useful for other researchers out there.&lt;/p&gt;

&lt;p&gt;I think I might also put some of these in an appropriate Github folder and turn this post into a readme for future use.  There are plenty more out there that are geared towards the NIALM stuff so if I get into that more, I can add it to the list there.&lt;/p&gt;

&lt;h3 id=&quot;green-button-sample-datasets&quot;&gt;Green Button Sample Datasets&lt;/h3&gt;

&lt;p&gt;Since BGE has signed on to use the Green Button data standard (like most utilities using smart meters have) I’m hoping to use a sample dataset, since it would easily be replaced by my own data once it’s available.&lt;/p&gt;

&lt;p&gt;The National Institute for Standards and Technology has a &lt;a href=&quot;https://collaborate.nist.gov/twiki-sggrid/bin/view/SmartGrid/GreenButtonSDK&quot;&gt;list of available sample datasets on their website&lt;/a&gt; for the software development kit, or SDK.  It isn’t specified what type of building or location the samples are from, but they do provide hourly profiles that add up to a full year’s worth of data.  This may be worth digging into.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://collaborate.nist.gov/twiki-sggrid/bin/view/SmartGrid/GreenButtonSDK&quot;&gt;same NIST website&lt;/a&gt; links to some data from San Diego Gas and Electric (SDGE).  There are multiple hourly datasets listed, and they specify a region within SDGE’s territory that the data have come from (coastal, inland, desert, etc.)&lt;/p&gt;

&lt;p&gt;I also found &lt;a href=&quot;http://www.sdge.com/documents/green-button-60-min-meter-interval-sample-data-csv&quot;&gt;this&lt;/a&gt; sample on SDGE’s own website.  It’s one year worth of hourly interval electrcity usage data for a residence.  At least looking at this one dataset qualitatively, the A/C loads don’t peak nearly as badly as I’d expect in Baltimore during the summer so I probably won’t use this.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/SDGE_Data.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/SDGE_data.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Sample SDGE Green Button electricity usage data.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;pecan-street-research-institute&quot;&gt;Pecan Street Research Institute&lt;/h3&gt;

&lt;p&gt;The &lt;a href=&quot;http://www.pecanstreet.org&quot;&gt;Pecan Street Research Institute&lt;/a&gt; curates possibly the largest residential energy and water consumption dataset.  The effort was initiated in 2009 and monitors the electricity, gas, and water use of over 900 homes in Texas at 1-minute resolution.  The electricity monitoring includes both whole house and up to 23 submetered circuits.  Unfortunately you have to be an active academic researcher to even obtain a free sample of the dataset, let alone full access to the whole shebang.&lt;/p&gt;

&lt;h3 id=&quot;jack-kelly-phd-student-at-imperial-college&quot;&gt;Jack Kelly, PhD student at Imperial College&lt;/h3&gt;

&lt;p&gt;Jack Kelly at Imperial College has been gracious enough to post his home monitoring datasets on &lt;a href=&quot;https://www.github.com/jackkelly&quot;&gt;Github&lt;/a&gt;.  He’s been monitoring two homes for electricity usage and sub-minute timescales, neither of which include air-conditioning data.  The lack of air conditioning doesn’t really help me.&lt;/p&gt;

&lt;h3 id=&quot;kaggle-competition-sample-data&quot;&gt;Kaggle Competition Sample Data&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://www.kaggle.com&quot;&gt;Kaggle&lt;/a&gt; hosts a platform for open competitions that usually ask competitors to devise machine learning or statistical predicitions, the most accurate prediction winning.  Several of the competitions have involved energy - either forecasting demand or disaggregating demand data into end uses (Kaggle’s actual business involves the application of machine learning for the energy industry).  The &lt;a href=&quot;http://www.kaggle.com/c/belkin-energy-disaggregation-competition&quot;&gt;disaggregation competition, sponsored by Belkin&lt;/a&gt;, asked competitors to try and make use of a particular technique in order to tease out how much energy was used for various appliances.  The data used for this is very high frequency resolution for four houses.&lt;/p&gt;

&lt;h3 id=&quot;uci-center-for-machine-learning-and-intelligent-systems&quot;&gt;UCI Center for Machine Learning and Intelligent Systems&lt;/h3&gt;

&lt;p&gt;University of California at Irvine has a center in the computer science department that has sourced a &lt;a href=&quot;http://archive.ics.uci.edu/ml/datasets/Individual+household+electric+power+consumption&quot;&gt;dataset from researchers in Clamart, France&lt;/a&gt;.  It appears the minute-resolution, sub-metered data (more than 2 million rows) were recorded by Georges Hebrail et al. for a home in France, but I haven’t been able to find traceback information to confirm.  Unfortunately, while one of the three submeters supposedly captures a water heater and an air conditioner, it’s clear that household member behavior - particularly when it comes to air conditioning - is substantially different than ours.  (This is likely the result of higher energy prices driving reduced consumption, something Americans are only familiar with when gasoline prices jump.)  Since I know our electricity consumption will spike significantly higher this summer, I don’t think this will be a useful dataset.&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Feeding-The-Data-Monster&quot;&gt;Feeding the Data Monster&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on July 31, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Closer Look at the Electricity SVR Forecast]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Closer-Look-At-SVM-Model" />
  <id>http://localhost:4000/articles/Closer-Look-At-SVM-Model</id>
  <updated>2014-06-18T00:00:00-00:00</updated>
  <published>2014-06-18T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;NOTE: In the &lt;a href=&quot;http://localhost:4000/articles/Predicting-Energy-Use-with-Support-Vector-Machines&quot;&gt;previous post&lt;/a&gt; I trained a support vector machine model using electricity demand data.  I should state that this is not the end of the analysis nor a robust model ready for release into the wild.  The model would need to undergo cross-validation to forge it into something more robust and generalized.&lt;/p&gt;

&lt;p&gt;The data I’m using are the hourly electricity consumption in my apartment between January 18 and March 31, 2014, measured by a smart meter and provided by BGE. The following plot is a closer look at the predicted demand and actual demand over two days from the testing period.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/SVM_predict_TS_zoom.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/SVM_predict_TS_zoom.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Predicted (SVR, next-hour) and actual hourly electricity usage, March 25 and 26.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;It looks like, with some exceptions, the prediction is generally one hour behind what the actual electricity demand is doing, especially looking at most of the peaks.  At first I thought (hoped) that this was an issue with how I was date indexing the predicted values after calculating them (assigning a timestamp one hour behind what it should have been). But after closer inspection and thinking about it, this actually makes sense.  In the post on &lt;a href=&quot;http://localhost:4000/articles/Autocorrelation&quot;&gt;autocorrelation&lt;/a&gt; I showed the following lag plot: &lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_Lag_1hour.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_Lag_1hour.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Lag plot, 1 hour.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The slope of the linear fit is about 0.97 and the constant (y-intercept) is about 0.04.  In other words, the ratio between any hour’s electricity demand and the hour previous is about one.  So unless the time of day or workday-non-workday indicator is &lt;em&gt;very&lt;/em&gt; influential at any hour (like &lt;a href=&quot;http://localhost:4000/articles/Guess-What-Time-Justin-Wakes-Up&quot;&gt;6am&lt;/a&gt;), the model will likely just predict the next hour to be the same as the current hour demand.  This will result in missing peaks by an hour, which if you’re a utility trying to schedule enough generation in the summer to meet the next hour’s air conditioning loads in a city, this is not so bueno.  I think the reason this is a product of the model is that a large fraction of the training samples used to build the model are &lt;em&gt;not&lt;/em&gt; peaks, save for the &lt;a href=&quot;http://localhost:4000/articles/Guess-What-Time-Justin-Wakes-Up&quot;&gt;6am wake-up time&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Below are the same results, just resampled to daily instead of hourly.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/SVM_predict_DailyTotal.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/SVM_predict_DailyTotal.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Hourly demand (actual and predicted) resampled to daily totals.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;accuracy-measures&quot;&gt;Accuracy Measures&lt;/h3&gt;

&lt;p&gt;In order to compare the accuracy of any models, the following measures can be used.  The file &lt;a href=&quot;http://www.github.com/jtelszasz/my_energy/forecasts/&quot;&gt;“errors.py”&lt;/a&gt; has all of these functions for future use.&lt;/p&gt;

&lt;p&gt;I’ve calculated and reported the values below and while some do have some absolute meaning, we’ll need to test out some more models to see the relative performance of the model.&lt;/p&gt;

&lt;h4 id=&quot;root-mean-sqaure-error&quot;&gt;Root Mean Sqaure Error&lt;/h4&gt;

&lt;p&gt;This is effectively the standard error of the model, and is in the same units as those of the predicted variable (or kilowatt-hours here).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://latex.codecogs.com/gif.latex?RMSE=\sqrt{\frac{\sum_{1}^{N}(y-\hat{y})^{2}}{N}}&quot; title=&quot;RMSE=\sqrt{\frac{\sum_{1}^{N}(y-\bar{y})^{2}}{N}}&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The standard error for the &lt;a href=&quot;http://localhost:4000/articles/Predicting-Energy-Use-with-Support-Vector-Machines&quot;&gt;initial SVM model&lt;/a&gt; is 0.17 kilowatt-hours.&lt;/p&gt;

&lt;h4 id=&quot;mean-absolute-percent-error&quot;&gt;Mean Absolute Percent Error&lt;/h4&gt;

&lt;p&gt;With this measure, the absolute percent error between each predicted value and actual value is calculated and the average is taken; the unit of measure is a percentage. If the absolute value wasn’t taken and there was little bias in the model, you’d end up with something close to zero and the measure would be worthless.  (No I couldn’t get the damn absolute value brackets working in the equation editor and I stopped caring.)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://latex.codecogs.com/gif.latex?MAPE=\frac{1}{N}\sum_{1}^{N}\frac{abs(y-\hat{y})}{y}&quot; title=&quot;MAPE=\frac{1}{N}\sum_{1}^{N}\frac{abs(y-\hat{y})}{y}&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The mean absolute percent error for the SVM model is 19%.&lt;/p&gt;

&lt;h4 id=&quot;coefficient-of-variation&quot;&gt;Coefficient of Variation&lt;/h4&gt;

&lt;p&gt;This is similar to the RMSE measure, except it is normalized to the mean.  It indicates how much variation there is with respect to the mean.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://latex.codecogs.com/gif.latex?CV=\sqrt{\frac{\frac{1}{N-1}\sum_{1}^{N}(y-\hat{y})^{2}}{\bar{y}}}&quot; title=&quot;CV=\sqrt{\frac{\frac{1}{N-1}\sum_{1}^{N}(y-\hat{y})^{2}}{\bar{y}}}&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The coefficient of variation for the SVM model is 0.21.&lt;/p&gt;

&lt;h4 id=&quot;mean-bias-error&quot;&gt;Mean Bias Error&lt;/h4&gt;

&lt;p&gt;The mean bias error gives an indication of how the model over- or underestimates.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://latex.codecogs.com/gif.latex?MBE=\frac{\frac{1}{N-1}\sum_{1}^{N}(y-\hat{y})}{\bar{y}}&quot; title=&quot;MBE=\frac{\frac{1}{N-1}\sum_{1}^{N}(y-\hat{y})}{\bar{y}}&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The mean bias error for the initial SVM model is -0.02, which indicates the model isn’t systematically over- or underestimating the hourly kilowatt-hour consumption.&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Closer-Look-At-SVM-Model&quot;&gt;Closer Look at the Electricity SVR Forecast&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on June 18, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Forecasting with Machine Learning]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Predicting-Energy-Use-with-Support-Vector-Machines" />
  <id>http://localhost:4000/articles/Predicting-Energy-Use-with-Support-Vector-Machines</id>
  <updated>2014-05-08T00:00:00-00:00</updated>
  <published>2014-05-08T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;p&gt;As part of my research in grad school I had started getting interested in the use of machine learning tools for predicting energy consumption.  I went so far as to enroll in a machine learning class, but lacking the some of the statistical/mathematical knowledge for what they were teaching I ended up dropping about three-quarters of the way through.  I’ve since gone back on my own time and learned more statisical inference through online coursework, and am taking a stab at some analysis and coding.&lt;/p&gt;

&lt;h3 id=&quot;i-thought-we-had-a-model&quot;&gt;I Thought We Had a Model&lt;/h3&gt;

&lt;p&gt;In &lt;a href=&quot;http://localhost:4000/articles/Energy-Use-and-Weather/&quot;&gt;another post&lt;/a&gt; I plotted electricity consumption against outdoor temperature and fit a straight line to the data.  &lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_and_Temp_OLS.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_and_Temp_OLS.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Linear ordinary least squares regression model for electricity consumption using outdoor temperature.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Let’s be honest: in terms of predictive capacity, this model sucks.  What if I needed to predict what the electricity consumption would be in the next hour?  The prediction would be on the line - I measure what the outdoor temperature is and read off the corresponding consumption from the blue line.  But look at how far the actual usage is scattered.  Unless I got very lucky, I’d be way off.  (In fact, I think using Bayesian regression I could quantify that probability, but that’s for another post.)&lt;/p&gt;

&lt;p&gt;Clearly the linear assumption doesn’t tell the whole story.  It doesn’t capture other aspects of the weather (wind and sun) and especially human behavior that all influence the amount of electricity consumed.  &lt;/p&gt;

&lt;h3 id=&quot;enter-machine-learning&quot;&gt;Enter Machine Learning&lt;/h3&gt;

&lt;p&gt;Certainly there are other simpler modeling approaches I can take, and I’d like to learn more about those as well.  But because Python and Scikit-learn have made it so easy and intuitive, I jumped straight into the deep end with support vector machines.  Support vector machines find an &lt;em&gt;optimal&lt;/em&gt; regression or classification model, minimizing both the error on the training data while minimizing the complexity of the model itself so that it will be generalized for new data (prediction).&lt;/p&gt;

&lt;p&gt;Support vector machines can be used for classification or regression.  As with other machine learning algorithms, the model is first “trained” using a (hopefully large) dataset.  The model parameters are optimized until a balance is struck between errors and model simplicity, a balance that is user adjusted.&lt;/p&gt;

&lt;p&gt;I should also say very clearly that I’m not breaking any new ground here, in fact &lt;a href=&quot;http://web.eecs.utk.edu/~leparker/publications/Energy-Buildings-2012.pdf&quot;&gt;this paper&lt;/a&gt; compares several algorithms on similar household energy demand data sets to what I’m using (sensor-based time series) and using similar inputs (weather variables, hour of day, workday/holiday indicator).&lt;/p&gt;

&lt;h3 id=&quot;modeling&quot;&gt;Modeling&lt;/h3&gt;

&lt;p&gt;Based on some of the &lt;a href=&quot;http://localhost:4000/articles/Autocorrelation&quot;&gt;previous explorations of the data&lt;/a&gt;, it looked like one hour’s electricity usage could be a very good predictor of the next hour’s usage.  In fact, it looked like it was a much better indicator than the &lt;a href=&quot;http://localhost:4000/articles/Energy-Use-and-Weather&quot;&gt;outdoor temperature&lt;/a&gt;.  I wonder how far that alone will get us.&lt;/p&gt;

&lt;p&gt;Well, not completely alone.  There are two other easy time-related variables I’d like to include.  One is the hour of the day (1 through 24, though these each need a feature unto themselves to make each hour equal to a categorical 0 or 1) and a field for whether or not the day was a typical work day or not (“not” would include holidays, weekends, and days I worked from home).  I would expect there to be a pattern of electricity usage associated with both of these variables and we can include them at virtually no modeling expense.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/SVM_training_set.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/SVM_training_set.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;The training set.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;As a training set, I’m using the hourly data between January 18 and March 24.  The testing set will consist of March 25 through March 31.&lt;/p&gt;

&lt;h3 id=&quot;support-vector-regression-with-scikit-learn&quot;&gt;Support Vector Regression with Scikit-learn&lt;/h3&gt;

&lt;p&gt;The Scikit-learn package for Python makes using machine learning algorithms simple and clean.  There is even a preprocessing module that does the scaling/normalization that should be done before building a model.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sklearn&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;preprocessing&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pre&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;scaler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pre&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StandardScaler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;X_train_scaled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scaler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;X_test_scaled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scaler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then to actually train the support vector regression model, I simply call the &lt;em&gt;fit&lt;/em&gt; function of the SVR class using the training data-target pairs.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;SVR_model&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;svm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SVR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kernel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;rbf&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gamma&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;001&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_train_scaled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The kernel &lt;em&gt;rbf&lt;/em&gt; is a radial basis function.  This kernel transforms the data into a higher dimensional space when performing the regression.  This generally results in more robust modelling of nonlinearities.  The &lt;em&gt;C&lt;/em&gt; and &lt;em&gt;gamma&lt;/em&gt; parameters are the user-adjustments I alluded to earlier that allow the model to strike a balance between tightly fitting the training data while keeping the simplest model possible.  For this first test case, I just manually adjusted them by order of magnitude until the &lt;img src=&quot;http://latex.codecogs.com/png.latex?R^2&quot; alt=&quot;R^2&quot; /&gt;  I was getting over the test set was as high as possible.  A better approach would be to do a proper cross-validation that finds the best parameters for the these data.&lt;/p&gt;

&lt;p&gt;Now to generate the prediction over the test data, I just call the &lt;em&gt;predict&lt;/em&gt; function on the &lt;em&gt;SVM_model&lt;/em&gt; object that I created (the trained model).&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;predict_y_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SVR_model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_test_scaled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Since I know what the actual hourly usage was over the testing period, I can calculate an &lt;img src=&quot;http://latex.codecogs.com/png.latex?R^2&quot; alt=&quot;R^2&quot; /&gt; for this testing set, which results in 0.732.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;SVR_model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;score&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X_test_scaled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/SVM_predict_TS.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/SVM_predict_TS.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Predicted (SVR, next-hour) and actual hourly electricity usage.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;It’s important to remember that this entire timespan wasn’t calculated in one go - each hour’s actual usage would have been used to help predict the next hour’s.  We’re always forecasting the next hour consumption in this scenario.&lt;/p&gt;

&lt;p&gt;One way to visualize the accuracy of the predictions is to plot them against the actual values.  If the predictions were 100% accurate, all the points would lie on the 45 degree line shown in black.  It’s a good sign that the points are distributed rather evenly above and below the line; it suggests that there is little bias (systematic under- or over-estimating).  In another post I’ll dig in a little more on evaluating the model.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/SVM_plot_errors.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/SVM_plot_errors.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Errors.&lt;/figcaption&gt;
&lt;/figure&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Predicting-Energy-Use-with-Support-Vector-Machines&quot;&gt;Forecasting with Machine Learning&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on May 08, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Electricity Usage Autocorrelation]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Autocorrelation" />
  <id>http://localhost:4000/articles/Autocorrelation</id>
  <updated>2014-05-05T00:00:00-00:00</updated>
  <published>2014-05-05T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;section id=&quot;table-of-contents&quot; class=&quot;toc&quot;&gt;
  &lt;header&gt;
    &lt;h3&gt;Contents&lt;/h3&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;

  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- /#table-of-contents --&gt;

&lt;p&gt;If the goal is to predict the next hour’s electricity consumption, a good predictor might be the consumption of the hour (or several hours) immediately prior.  One way to assess whether or not this is through the autocorrelation given by:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://latex.codecogs.com/png.latex?R_{h}=\frac{c_{h}}{c_{0}}=\frac{\sum_{t=1}^{N-h}(Y_{t}-\bar{Y})(Y_{t+h}-\bar{Y})}{\sum_{t=1}^{N}(Y_{t}-\bar{Y})^2}  &quot; alt=&quot;R_{h}=\frac{c_{h}}{c_{0}}=\frac{\sum_{t=1}^{N-h}(Y_{t}-\bar{Y})(Y_{t+h}-\bar{Y})}{\sum_{t=1}^{N}(Y_{t}-\bar{Y})^2}&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This measures the covariance between every point and a particular lag (or number of hours before) with respect to the overall variance.  This is calculated for every possible lag (for 1 hour all the way up to the length of the dataset) and plotted.  If the data were completely random, this would be zero at all time lags.  Again, I’m using the BGE smart meter data for my apartment for January 18 through March 31 of 2014.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_Autocorrelation.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_Autocorrelation.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Electricity consumption autocorrelation.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Confidence intervals of 95% and 99% are also plotted (solid and dashed horizontal lines, respectively) and so points outside these intervals are statistically significant; that is, the null hypothesis that there is no correlation between the data and its a particular lag is rejected.  For the apartment’s electricity data there is statistically significant from 1 hour lag to approximately 500 hours of lag - the previous 20 days of electricity use are correlated with a typical hour’s elecricity use.&lt;/p&gt;

&lt;p&gt;There also appears to be a significant inverse relationship with lag times longer than 600 hours (25 days).  My guess is that this is due to the warming weather between February and March.  This relationship indicates that the electricity consumption for a given hour is typically less than in February - something common sense tells us, but this says that relationship is statistically significant.&lt;/p&gt;

&lt;p&gt;If we want to use history as a means for predicting the next hour of consumption, including the entire history would become unwieldy.  To train  model we’d be using an N x N array for training where N is the number of hours for which we’ve been recording data.  For predicting the next hour, we would need a 1 X N vector of all of the N previous hours.  Instead, it would be more computationally efficient if we could reduce the training data set to N x A where A is a small number of strongly correlated indicator hours, say the past 6 hours or so.  To get at this, I’ve plotted a few example lags against the hour’s electricity consumption.  There’s nothing to say that these relationships &lt;em&gt;must&lt;/em&gt; be linear, but by plotting the scatter plot and checking the R^2 of the linear fit, it’s clear that for the most part the relationship (at least with immediate history) is linear.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_Lag_1hour.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_Lag_1hour.png&quot; /&gt;&lt;/a&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_Lag_6hour.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_Lag_6hour.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Lag plot and linear regression, 1 hour and 6 hour lag.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_Lag_12hour.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_Lag_12hour.png&quot; /&gt;&lt;/a&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_Lag_24hour.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_Lag_24hour.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Lag plot and linear regression, 12 hour and 24 hour lag.&lt;/figcaption&gt;

As expected, as the size of the lag increases, the R^2 decreases, meaning the consumption 1 hour before is more relevant than the consumption 24 hours (or more) immediately prior.  If we want to build a predictive model, including the 1 hour lag would be wise.







&lt;/figure&gt;

  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Autocorrelation&quot;&gt;Electricity Usage Autocorrelation&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on May 05, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Energy Use and Weather]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Energy-Use-and-Weather" />
  <id>http://localhost:4000/articles/Energy-Use-and-Weather</id>
  <updated>2014-04-18T00:00:00-00:00</updated>
  <published>2014-04-18T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;section id=&quot;table-of-contents&quot; class=&quot;toc&quot;&gt;
  &lt;header&gt;
    &lt;h3&gt;Contents&lt;/h3&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#statistical-model&quot;&gt;Statistical Model&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#engineering-model&quot;&gt;Engineering Model&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- /#table-of-contents --&gt;

&lt;p&gt;Stepping back, let’s take a look at what the actual time series of the smart meter electricity data looks like for my apartment.  I’ll also bring in the hourly outdoor temperature as measured at Baltimore-Washington International Airport (less than 10 miles away as the crow flies).  The data are obtained via the API at &lt;a href=&quot;http://www.wunderground.com/weather/api&quot;&gt;Weather Underground&lt;/a&gt;.  Again, you can follow along my line (curve, circle, some other obscure geometry) of thinking by taking a look at the &lt;a href=&quot;http://nbviewer.ipython.org/github/jtelszasz/my_energy/blob/master/My_Energy_And_Weather.ipynb?create=1&quot;&gt;iPython notebook&lt;/a&gt;.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_and_Temp_TS.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_and_Temp_TS.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Time series of hourly electricity consumption and outdoor temperature.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;It looks as if there’s an inverse relationship between the outdoor temperature and the apartment’s electricity consumption.  We’d expect this even in the winter for our apartment due to our use of electric resistance heating.  (This is a minority case as many buildings, whether commercial, multi-family, or single-family residential, burn fossil fuels directly for providing heat.  As a precursor to a potential future analysis I’d like to work on using these data, there’s often a debate whether the GHG emissions resulting from electric resistance heating are in fact on par or greater with burning natural gas directly in a furnace on site.  This is due to losses in the electric grid - first the combustion and thermal efficiency of the generation plant itself, then the various lossy inverters required for changing voltages and losses in the transmission lines themselves.  While this is an important question to ask, the broader picture and motivation should be the integration of renewables and storage to provide heat cleanly - electric resistance allows for this integration.)&lt;/p&gt;

&lt;p&gt;Back to the temperature vs. electricity use question.  To start digging into the relationship a bit, we’ll start with the scatter plot.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_and_Temp_Scatter.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_and_Temp_Scatter.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Scatter plot of hourly electricity consumption and outdoor temperature.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;As we’d expect, as the outdoor temperature increases, the electricity use generally decreases.  &lt;/p&gt;

&lt;h3 id=&quot;statistical-model&quot;&gt;Statistical Model&lt;/h3&gt;

&lt;p&gt;To take a first crack at quantifying the relationship we can use an ordinary least squares regression to try and quantify that relationship.  As is typically the case with Python, someone has already coded the tools necessary so I just have to import the Statsmodels module and use the right tool.&lt;/p&gt;

&lt;p&gt;Running the following block of code…&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OLS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elec_and_weather&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;USAGE&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_constant&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elec_and_weather&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;tempF&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;…fits the model to our data and spits out the information about the model.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_and_Temp_OLS_Output.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_and_Temp_OLS_Output.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Ordinary least squares regression model.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;This is what the model actually looks like on top of the data.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Elec_and_Temp_OLS.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Elec_and_Temp_OLS.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Linear ordinary least squares regression model for electricity consumption using outdoor temperature.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;So our R^2 shows that 48% of the variation in the electricity use can be explained by the outdoor temperature alone.  The remaining 52% would have to be explained by other variables or natural variability.&lt;/p&gt;

&lt;h3 id=&quot;engineering-model&quot;&gt;Engineering Model&lt;/h3&gt;

&lt;p&gt;What are we saying by assuming that the model should be linear?  That (all else being equal) for every degree increase in the outdoor temperature, there should be a proportional decrease in the electricity consumption.  There’s a reason this is a valid assumption, again negelecting the otherwise stochastic behavior as a result of weather and occupancy/behavior.  The underlying heat transfer equation is:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://latex.codecogs.com/png.latex?PBP=\frac{Initial%20Investment}{Annual%20Variable%20Cost%20Savings}&quot; alt=&quot;PBP=\frac{Initial%20Investment}{Annual%20Variable%20Cost%20Savings}&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;where &lt;img src=&quot;http://latex.codecogs.com/png.latex?\inline Q&quot; alt=&quot;Q&quot; /&gt; is a heat flow rate&lt;/li&gt;
  &lt;li&gt;&lt;img src=&quot;http://latex.codecogs.com/png.latex?\inline h&quot; alt=&quot;h&quot; /&gt; is a characteristic heat transfer coefficient&lt;/li&gt;
  &lt;li&gt;&lt;img src=&quot;http://latex.codecogs.com/png.latex?\inline A&quot; alt=&quot;A&quot; /&gt; is the perpendicular area through which heat is passing&lt;/li&gt;
  &lt;li&gt;and &lt;img src=&quot;http://latex.codecogs.com/png.latex?\inline \Delta T&quot; alt=&quot;\Delta T&quot; /&gt; is the temperature difference across the boundary through which heat is being transmitted, in this case outdoor and indoor temperature&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If we were to assume that the behavior in the apartment was constant - the same lights were always on, the same devices were always charging, the refrigerator compressor was always running - if we assumed that the thermostat was always set at 70 degrees, and we assumed that the only part of the weather that ever changed was the temperature (humidity and wind were constant) the linear regression model we ran earlier would exactly mirror this equation.  The variation in the electricity consumption would be entirely explained by the change in outdoor temperature, and the slope of the line would be the overall heat transfer coefficient of the apartment (through walls, windows, doors, floors, ceilings, leakage, etc.) multiplied by the square area of the apartment boundary.  By installing higher R-value insulation in the walls or replacing our old drafty windows with triple-glazing, Argon-filled windows, we’d be altering the overall heat transfer coefficient &lt;img src=&quot;http://latex.codecogs.com/png.latex?\inline h&quot; alt=&quot;h&quot; /&gt; and effectively reducing the slope of the line we fit to the data.  We can also alter the line’s slope by changing the thermostat setting; remember, the temperature difference &lt;img src=&quot;http://latex.codecogs.com/png.latex?\inline \Delta T&quot; alt=&quot;\Delta T&quot; /&gt; we’re talking about is the difference between the outdoor and indoor temperatures.&lt;/p&gt;

&lt;p&gt;As in all things, there is no true black (statistics) and white (engineering) - there are only grays.  In this regard smart meters can  obviously help us learn about buildings in addition to occupancy/behavior.  With clever algorithms (not the simple linear model I’ve used above) we can start to disaggregate energy consumption into its constituent parts - building response to weather and occupancy behavior.  Indeed, we’ve begun to do this.  For example, BGE recommends different energy efficiency actions I can take based on my consumption patterns.  But this is just a first step in how these data can be used, even just at individual residence level.  I’m imagining exploring in future analyses how to use these data to size battery storage and solar photovoltaics.&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Energy-Use-and-Weather&quot;&gt;Energy Use and Weather&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on April 18, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[More Smart Meter Data...]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/More-Smart-Meter-Data" />
  <id>http://localhost:4000/articles/More-Smart-Meter-Data</id>
  <updated>2014-04-17T00:00:00-00:00</updated>
  <published>2014-04-17T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;section id=&quot;table-of-contents&quot; class=&quot;toc&quot;&gt;
  &lt;header&gt;
    &lt;h3&gt;Contents&lt;/h3&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;

  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- /#table-of-contents --&gt;

&lt;p&gt;In an  &lt;a href=&quot;http://localhost:4000/articles/My-BGE-Smart-Meter-Data&quot;&gt;earlier post&lt;/a&gt;, I showed initial descriptive plots for my electricity use.  Now that we have some more data, we can break these up to see differences as the spring season progresses.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
  &lt;a href=&quot;http://localhost:4000/images/ElecHist - Feb2014.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/ElecHist - Feb2014.png&quot; /&gt;&lt;/a&gt;
  &lt;a href=&quot;http://localhost:4000/images/ElecHist - Mar2014.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/ElecHist - Mar2014.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Histograms for February and March 2014 electricity consumption.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Another way of showing the difference in each month’s energy consumption patterns would be the cumulative distribution.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/ElecCDF - Feb_March2014.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/ElecCDF - Feb_March2014.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Histogram for February 2014 electricity consumption.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The plot above shows that for a given hourly kilowatt-hour amount, the proportion of hours at which the consumption was that amount or less is substantially higher in March than in April; of course, we’d expect that with the warmer weather.  For example, about 18% of the time in February the hourly consumption was 1 kilowatt-hour or less, while in March it was the case about 70% of the time.&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/More-Smart-Meter-Data&quot;&gt;More Smart Meter Data...&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on April 17, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Guess What Time Justin Wakes Up]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/Guess-What-Time-Justin-Wakes-Up" />
  <id>http://localhost:4000/articles/Guess-What-Time-Justin-Wakes-Up</id>
  <updated>2014-04-16T00:00:00-00:00</updated>
  <published>2014-04-16T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;section id=&quot;table-of-contents&quot; class=&quot;toc&quot;&gt;
  &lt;header&gt;
    &lt;h3&gt;Contents&lt;/h3&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#the-correct-answer-is&quot;&gt;The correct answer is…&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- /#table-of-contents --&gt;

&lt;p&gt;For analysis tools, I’m mainly using Python (in the form of iPython notebooks) with the &lt;a href=&quot;http://pandas.pydata.org/&quot;&gt;Pandas&lt;/a&gt; module for data analysis (the sklearn module for machine learning later). Suffice it to say it’s rad.  I also use &lt;a href=&quot;https://github.com/jtelszasz&quot;&gt;Github&lt;/a&gt;, both for my analysis and modeling as well as this blog itself (as you can tell from the current web address), so you’re welcome to peruse or use any of my code from there.  I’ll try to keep my iPython notebooks pretty clean and explained well as a supplement to the blog.  You can find the notebook for the analysis below &lt;a href=&quot;http://nbviewer.ipython.org/github/jtelszasz/my_energy/blob/master/My_Energy.ipynb?create=1&quot;&gt;here&lt;/a&gt;.  (Just click the link - you don’t need anything special to be able to view the notebook.)&lt;/p&gt;

&lt;p&gt;Pandas has been great for data analysis and makes things intuitive and quick.  As a mechanical engineer, a lot of my previous work was in Matlab.  It of course has its strengths but for data analysis it always took quite a bit of manual data munging, especially when it came to time series. &lt;/p&gt;

&lt;p&gt;Anyways, using the Python groupby function I can manipulate the time series of my hourly electricity consumption from my BGE smart data.  The data starts from January 18 and I now have a few full months of data.  Below is a quick code snipet of how I’m using groupby in this case.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# elec_and_weather: hourly electricity usage&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;elec_and_weather&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;groupby&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elec_and_weather&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dayofweek&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elec_and_weather&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dayofweek&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elec_and_weather&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;the-correct-answer-is&quot;&gt;The correct answer is…&lt;/h3&gt;

&lt;p&gt;To arrive at the plot below, I actually first sliced the data by month and then applied the groupby shown above.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/AvgDays_Elec_Feb_March.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/AvgDays_Elec_Feb_March.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Average weekday and weekend electricity consumption for February and March of 2014.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;This is the “guess what time Justin wakes up for work” plot. The coffee pot consumes 900 W, and we typically have it on for about 20 minutes or so, which would amount to a spike of .3 kWh for that hour. The roommate’s hair dryer consumes 1,875 W and she uses it for about 5 minutes (so she claims, I think I want to see data for that), so that would make for about a .15 kWh spike. Of course that’s what I think a typical day looks like. Not every weekday looked like that (if I worked from home, I probably used the french press instead of the coffee maker, and sometimes the roommate showers the night before and so doesn’t blow dry the hair in the morn). Therefore, the 6am peak in the weekday averages is not quite that high. &lt;/p&gt;

&lt;p&gt;Since this spike should be strictly due to behavior, we don’t need to look at the difference between February and March.  We can look at the 5am-6am difference over all the weekday samples thusly:&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Wkday_5am6amDiff - Feb_March.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Wkday_5am6amDiff - Feb_March.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;5am to 6am difference across all weekday samples.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The average weekday difference over this time period between 5am and 6am is .253 kWh.  The 20 minute coffee maker run and the 5 minute blow dryer would amount to .45 kWh.  Looks like that was the case at least a couple of times.&lt;/p&gt;

&lt;p&gt;This is a good illustration of privacy concerns around ubiquitous data capture.  Measuring energy consumption is a proxy for measuring human behavior, and while I don’t share a lot of the privacy concerns that many out there do, I can understand why this is problematic.  Suffice it to say, I don’t care that a reader of this blog (are there any?) knows when I wake up (among other things).  Moreover, at larger scales than individual households - say at city block levels - these concerns should start to fade away, as aggregated data can effectively anonymize the information.  &lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/Guess-What-Time-Justin-Wakes-Up&quot;&gt;Guess What Time Justin Wakes Up&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on April 16, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[My Electricity Use]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/My-BGE-Smart-Meter-Data" />
  <id>http://localhost:4000/articles/My-BGE-Smart-Meter-Data</id>
  <updated>2014-03-27T00:00:00-00:00</updated>
  <published>2014-03-16T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;section id=&quot;table-of-contents&quot; class=&quot;toc&quot;&gt;
  &lt;header&gt;
    &lt;h3&gt;Contents&lt;/h3&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#green-button&quot;&gt;Green Button&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#data&quot;&gt;Data&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- /#table-of-contents --&gt;

&lt;p&gt;Previously, I laid out what BGE’s smart meters are doing in Baltimore. Below is a quick snapshot of the downloaded data for my apartment electricity usage.&lt;/p&gt;

&lt;h3 id=&quot;green-button&quot;&gt;Green Button&lt;/h3&gt;

&lt;p&gt;Green Button is the standard by which utilities are providing data to their customers. It was prompted in 2011 by the U.S. Chief Technology Officer calling on industry to standardize accessibility and data format for customer smart meter data and parallels the &lt;a href=&quot;&quot;&gt;Blue Button&lt;/a&gt; concept for health data. Customers can download their interval usage data and use as they see fit. A customer could provide the data to a solar panel installer to better inform the design of the installation, or the data could be used to develop apps that show opportunities for efficiency upgrades.&lt;/p&gt;

&lt;h3 id=&quot;data&quot;&gt;Data&lt;/h3&gt;

&lt;p&gt;I’ve downloaded my data from the first date available (Janurary 18, 2014) through the end of February 28, 2014. I’m able to access hourly electrical consumption in kilowatt-hours, and the file is a clean csv. Shown below are probability distributions over those 6 weeks or so. We have electric resistance heating (not central gas-fired heating) and so our consumption during the winter is quite high.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/MyEnergy_ElecHist.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/MyEnergy_ElecHist.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Probability distribution for hourly electricity usage. Data collected January 18, 2014, through February 28, 2014.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Below is the cumulative distribution. For a given kilowatt-hour usage on the horizontal axis, the cumulative function gives the probability that an hour’s usage was that quanitity or less.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/MyEnergy_ElecCDF.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/MyEnergy_ElecCDF.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Cumulative distribution for hourly electricity usage. Data collected January 18, 2014, through February 28, 2014.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Both figures show that there is a higher number of hours spent consuming about 0.5 kilowatt-hours. It may take some weather data to tease out what might be going on there, and I plan to look at the influence of weather next.&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/My-BGE-Smart-Meter-Data&quot;&gt;My Electricity Use&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on March 16, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[BGE Smart Meters]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/BGE-Smart-Meters" />
  <id>http://localhost:4000/articles/BGE-Smart-Meters</id>
  <updated>2014-05-08T00:00:00-00:00</updated>
  <published>2014-03-15T00:00:00-04:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;section id=&quot;table-of-contents&quot; class=&quot;toc&quot;&gt;
  &lt;header&gt;
    &lt;h3&gt;Contents&lt;/h3&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#comparisons-to-neighbors&quot;&gt;Comparisons to Neighbors&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#disaggregation-and-savings-suggestions&quot;&gt;Disaggregation and Savings Suggestions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- /#table-of-contents --&gt;

&lt;p&gt;Citizens of Baltimore and captive customers of Baltimore Gas &amp;amp; Electric! In the words of Gabriel, I bring you good tidings of great joy and data and stuff. For the last year or so BGE has been rolling out smart meters to their electricity customers. Our neighborhood was &lt;a href=&quot;http://www.bge.com/smartenergy/smartgrid/smartmeters/Pages/Installation-Schedule.aspx&quot;&gt;slated for the second half of last year&lt;/a&gt;, and lo, our data hath appeared unto us.&lt;/p&gt;

&lt;p&gt;BGE indicates that the smart meter upgrades have two components - electricity meter replacement (which communicates every 4 hours) and an upgrade to the natural gas meter that also enables communication (though this only happens every 24 hours). Currently, my BGE dashboard is only showing my electricity consumption so most of the discussion below only applies to electricity. I’ve read their website extensively but have found no indication that we’ll also get to see hourly gas consumption. This is unfortunate for single family home owners who burn natural gas on site for space heating, since this is the &lt;a href=&quot;http://www.eia.gov/todayinenergy/detail.cfm?id=10271&amp;amp;src=%E2%80%B9%20Consumption%20%20%20%20%20%20Residential%20Energy%20Consumption%20Survey%20(RECS)-b1&quot;&gt;largest portion of their annual energy consumption&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It appears there are two primary functions the smart meters will initially serve: for providing information to their customers and to monitor the grid for outages. (Apparently even just partial implementation proved their case for grid outage notification during &lt;a href=&quot;http://www.greentechmedia.com/articles/read/bge-gets-a-taste-of-smart-meter-capabilities-during-sandy&quot;&gt;Hurricane Sandy&lt;/a&gt;.) These are two pretty straight-forward applications of the data, I’m wondering where BGE (and other utilities) is headed for the next-step analysis (predictive analytics, grid efficiency and repair, optimization, renewables and storage integration, etc.)&lt;/p&gt;

&lt;p&gt;One interesting note on the BGE data privacy policy and a bit of wishful thinking: while BGE can’t disclose or sell individual customer interval data, the &lt;a href=&quot;http://www.bge.com/smartenergy/smartgrid/Pages/Data-Privacy-Policy.aspx&quot;&gt;BGE website&lt;/a&gt; states “Smart Meter interval energy use data that is not specific to the customer, such as combined data, is not included within the scope of this policy.” I think BGE could get ahead of the curve by providing block (or similar aggregate) data in the name of transparency and perhaps as a community service. As they indicate, aggregate data is not covered by the data privacy policy; moreover, the City of Baltimore has followed the suit of many other major cities by establishing an &lt;a href=&quot;https://data.baltimorecity.gov&quot;&gt;open data repository.&lt;/a&gt; Perhaps BGE and the city could work together to post aggregated interval data to Open Baltimore.&lt;/p&gt;

&lt;h3 id=&quot;comparisons-to-neighbors&quot;&gt;Comparisons to Neighbors&lt;/h3&gt;

&lt;p&gt;The BGE website does slightly more than just show you historical use, with the most prominent feature being the ability to compare your use to a sample of comparable neighbors. There have been many studies regarding energy consumption reductions as a result of real-time monitoring, feedback, and contextual comparisons (see &lt;a href=&quot;http://www1.eere.energy.gov/seeaction/pdfs/customerinformation_behavioral_status_summary.pdf &quot;&gt;here&lt;/a&gt;). In fact, a couple friends and a former professor did &lt;a href=&quot;http://www.sciencedirect.com/science/article/pii/S0378778813003782&quot;&gt;some work&lt;/a&gt; on the topic.&lt;/p&gt;

&lt;p&gt;In keeping with the data policy exclusion for aggregate data, they use an average of a hundred or so customers that share your characteristics, all within a two or three mile radius of your house (ours average 0.4 miles from us). The initial comparison with which I was presented was way off base because our heating comes from electric resistance, but once I answered a few questions on the website about what appliances we have and the like, the comparison made much more sense (I presume we’re being compared against neighbors who all have electric resistance heating).&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/BGE-dashboard-01.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/BGE-dashboard-01.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;February comparison of our electricity use to an average of a hundred or so comparable neighbors and the top 20% most efficient. (source: www.bge.com)&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/BGE-dashboard-02.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/BGE-dashboard-02.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Monthly comparison of our electricity use to an average of a hundred or so comparable neighbors and the top 20% most efficient (based on billing data, since smart meters weren&#39;t widespread for the shown timeframe). (source: www.bge.com)&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Of course, the comparisons of your monthly energy use could have been done with the monthly billing they would have anyways, without the use of smart meters. Using the smart meter data, it looks like soon we’ll be able to compare hour-to-hour use (lending what I would presume will be a more real-time competition feel to things) but this isn’t operational yet. They are, however, displaying the hourly data along with the outdoor dry-bulb temperature for reference.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/BGE-dashboard-04.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/BGE-dashboard-04.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Hourly electricity consumption (kilowatt-hours) and outdoor temperature (degrees Fahrenheit) for March 11, 2014. (source: www.bge.com)&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;My roommate was home this day. The drop in consumption in the afternoon could be from her leaving the house and shutting off lights and her computer, the weather, or both.  Later I’ll be looking into our apartment’s response to the weather so it might become a bit more apparent then.&lt;/p&gt;

&lt;h3 id=&quot;disaggregation-and-savings-suggestions&quot;&gt;Disaggregation and Savings Suggestions&lt;/h3&gt;

&lt;p&gt;Another feature they provide is an estimated breakdown of your electricity consumption into categories (heating, lighting, etc.) Currently, these would have to be static estimates based solely on the answers I provided about our appliances and the like. Farther down the road, the hourly data will have a larger role to play here. Electricity consumption (and energy use in general) is largely a function of two things: the weather and human behavior, both of which can change drastically hour to hour. They’ll likely need about a year’s worth of data to be able to tease out the portion of energy use that is your behavior and the portion that is your building’s response to weather. This is because whatever algorithm they are using to disaggregate weather from behavior will need to have seen your electricity consumption during all climates.&lt;/p&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/BGE-dashboard-06.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/BGE-dashboard-06.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Estimated breakdown of electricity consumption based on customer and building characteristics. Also shown, suggestions for reducing usage. (source: www.bge.com)&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The disaggregation lends itself to targeted recommendations for how to reduce your electricity consumption. An interesting feature they’ve implemented for more social context is a counter of how many customers have indicated that they would try a particular recommendation (eg. “13,859 people will turn off their lights when not needed; 1,654 people will hang dry their laundry,” etc.) In the same way that “like”-ing a post on Facebook along with many others is in some way a validation that one likes the “right” things, I can see this feature serving to validate one’s choices about their energy consumption.&lt;/p&gt;

&lt;p&gt;All in all, this is a good thing. Concerns about radio frequency exposure are rather &lt;a href=&quot;http://www.epri.com/abstracts/Pages/ProductAbstract.aspx?ProductId=000000000001021829&quot;&gt;unfounded&lt;/a&gt; especially when we all carry cell phones in our pockets. If you are someone who has concerns about data privacy, nothing I have to say on the topic will likely alleviate your fears (particularly in light of the fact that I’m posting my energy usage data on a blog). In a later post, I’ll show you more about my data (in the hopes that you show me yours).&lt;/p&gt;

&lt;p&gt;UPDATE (05-08-2014): I should mention that the data services and analytics that BGE displays are all powered by &lt;a href=&quot;http://www.opower.com/&quot;&gt;OPower&lt;/a&gt;, one of the leading smart meter analytics companies out there.&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/BGE-Smart-Meters&quot;&gt;BGE Smart Meters&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on March 15, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Goalkeeper Performance Stats]]></title>
 <link rel="alternate" type="text/html" href="http://localhost:4000/articles/GK-Performance-Stats" />
  <id>http://localhost:4000/articles/GK-Performance-Stats</id>
  <updated>2014-03-15T00:00:00-00:00</updated>
  <published>2014-03-05T00:00:00-05:00</published>
  
  <author>
    <name>Justin Elszasz</name>
    <uri>http://localhost:4000</uri>
    <email></email>
  </author>
  <content type="html">&lt;section id=&quot;table-of-contents&quot; class=&quot;toc&quot;&gt;
  &lt;header&gt;
    &lt;h3&gt;Contents&lt;/h3&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#saves&quot;&gt;Saves&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#distribution&quot;&gt;Distribution&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#crosses&quot;&gt;Crosses&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;
&lt;!-- /#table-of-contents --&gt;

&lt;p&gt;In 2012, Manchester City FC and &lt;a href=&quot;http://www.optasports.com&quot; title=&quot;Opta&quot;&gt;Opta&lt;/a&gt; (a sports analytics company) teamed up to release a season’s worth of granular data for the 2011-2012 season. Two datasets were released - one with 206 fields containing total game events by player, and another that included x-y locations for passes and shots for each player for the Bolton-Manchester City match on August 21, 2011. There are plenty of other blogs that have been doing football analytics and looking at this data, and I’m likely not to break any new ground. I thought it would be a fun dataset to look at.&lt;/p&gt;

&lt;p&gt;Since I’m a goalkeeper, I became interested in measuring the performance of goalkeepers. Having surveyed a number of soccer analytics blogs, goalkeeping seems to be a lesser researched topic and is also potentially more difficult to analyze given the smaller number of events or actions a goalkeeper might take over the course of a game compared to field players. I shouldn’t suggest here that I’ll be breaking new ground or providing revolutionary keeper analysis - I’m no statistics whiz - just letting you on to my motivations.&lt;/p&gt;

&lt;p&gt;To kick things off (ugh, I can’t possibly get away with that), I’ve provided some quick and hopefully useful stat tables for the overall season numbers for goalkeepers. I’m only looking at goalkeepers who played 1080 minutes or more (12 games) so we have a reasonable sample size for each goalkeeper. I’ll get to some potential visualizations later, but for now these stats are simple enough that ordered lists are a clear enough way to see some performance metrics. I’m actively choosing not to go the bar graph route; I think they’re terrible for three or more variables.&lt;/p&gt;

&lt;p&gt;This would also be a good time to mention the “P90” measures. Since not all players have played the same minutes, it makes sense to normalize their actions to their time played.  Instead of per minute (as in saves per minute or distributions per minute) I think it makes sense to do this on a per 90 minute basis.  Ted Knutson (among others) have done this over at &lt;a href=&quot;http://www.statsbomb.com&quot; title=&quot;Statsbomb&quot;&gt;Statsbomb&lt;/a&gt; (which, if anything I’m talking about is interesting to you, you &lt;em&gt;have&lt;/em&gt; to check out).&lt;/p&gt;

&lt;h3 id=&quot;saves&quot;&gt;Saves&lt;/h3&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Saves_Table.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Saves_Table.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Goalkeeper saves tables, 2011-2012 season .&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The simplest way of measuring keeper performance is just to rate them on save percentage (number of shots saved out of number of conceded shots on target). The dataset is also kind enough to us in that they provide short range saves/shots conceded and long range saves/shots conceded. This starts to drill down a bit more into the qualities of the goalkeeper. This is especially true of short range.  For long range shots in the Premier League it should take a true screamer to beat a goalkeeper, so these numbers &lt;em&gt;should&lt;/em&gt; all be at or near 100%, and are likely more reflective of the number of long-range blinders the team conceded than the keeper’s performance.&lt;/p&gt;

&lt;p&gt;From the looks of it, de Gea is a top shot-stopper. I’ll discuss him a bit with regard to crosses as well.&lt;/p&gt;

&lt;p&gt;Szczesny was apparently not very good for Arsenal this season. All three save percentages (all, long-range, and short-range) are near bottom. Granted, these numbers don’t tell the whole story. Maybe Szczesny was seeing an abnormally high number of quality, well-placed shots at all ranges. A bit of foreshadowing here: we’ll need to look at team defensive performance and shots data to get a better feel for this.&lt;/p&gt;

&lt;p&gt;You also see the performance of Mignolet and Begovic starting to stand out. Both were with bottom half of the table teams and were likely facing many more decent chances than a Hart or a De Gea. Of course, Mignolet is now Liverpool’s starter and Belgium’s number two, and Begovic (despite a howler or two and a current injury) is highly touted.&lt;/p&gt;

&lt;h3 id=&quot;distribution&quot;&gt;Distribution&lt;/h3&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Dist_Table.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Dist_Table.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Goalkeeper distribution tables, 2011-2012 season.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;As in all of these top level stats, the distribution numbers are confounded as well. I think team tactics has a pretty big role to play here. For a possession team, a goalkeeper is going to be picking out short balls and throws and trying to keep his numbers up. Other more direct or counter-attacking sides will want a goalkeeper to quickly get long balls down the field or to the flanks, possibly with lesser rates of success.&lt;/p&gt;

&lt;p&gt;I definitely want to do some more work on distribution. You won’t get through a televised broadcast of a Premier League match without a former (field) player (probably Eric I-Need-Salsa-For-The-Big-Ass-Chip-On-My-God-Damn-Shoulder Wynalda or Robbie Mustoe) decrying the need for the &lt;em&gt;modern&lt;/em&gt; goalkeeper to be comfortable on the ball - to assist a team in maintaining possession, meaning make simple passes to nearby defenders while under pressure. Besides just these distribution numbers (which are for distibution after a keeper catches), passing numbers should play a heavy role in determining the ability of a goalkeeper.&lt;/p&gt;

&lt;h3 id=&quot;crosses&quot;&gt;Crosses&lt;/h3&gt;

&lt;figure&gt;
  &lt;a href=&quot;http://localhost:4000/images/Cross_Table.png&quot;&gt;&lt;img src=&quot;http://localhost:4000/images/Cross_Table.png&quot; /&gt;&lt;/a&gt;
  &lt;figcaption&gt;Goalkeeper distribution tables, 2011-2012 season.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;De Gea and Reina quite clearly prefer punching or not challenging for the ball at all to catching. De Gea got quite a bit of flack in this, his first season in the Premier League. From a goalkeeper’s prospective, I’d be flaky as all get out on crosses if I started in the Premier League at 23 (granted he was a product of the Atletico Madrid youth academy and was first choice for the first team for about a season and a half there). It’s much easier to build confidence on shot-stopping (especially when you are as good and as agile as de Gea) but it’s hard to duplicate high pressure, game-like cross scenarios in training.&lt;/p&gt;

&lt;p&gt;What these numbers don’t tell you is whether a punch was successful in clearing the ball out of danger or not. (For that we’d need to dig pretty deeply into X-Y coordinate data from another dataset.) Obviously if a keeper punches but the ball slips out to an opposing player for a shot, the keeper hasn’t really effectively dealt with the cross.&lt;/p&gt;

&lt;p&gt;All else being equal, I can’t imagine Liverpool and Manchester United were allowing any more dangerous crosses into their box than any other team (which might lead to more punches from the keeper), so I think it’s generally a bad thing that both of these keepers were preferring to punch so often. Of course it was De Gea’s first season at United, and Reina is no longer with Liverpool, so I guess there you have it.&lt;/p&gt;

&lt;p&gt;Anyways, hope some of these numbers are fun or useful to you. I’m definitely having fun digging into this dataset. &lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/articles/GK-Performance-Stats&quot;&gt;Goalkeeper Performance Stats&lt;/a&gt; was originally published by Justin Elszasz at &lt;a href=&quot;http://localhost:4000&quot;&gt;The Training Set&lt;/a&gt; on March 05, 2014.&lt;/p&gt;</content>
</entry>

</feed>
