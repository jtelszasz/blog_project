<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Energy Use and Weather &#8211; The Training Set</title>
<meta name="description" content="Looking at the correlation between weather and energy (electricity) consumption.">
<meta name="keywords" content="BGE, smart-meters, energy, data, electricity">


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Energy Use and Weather">
<meta property="og:description" content="Looking at the correlation between weather and energy (electricity) consumption.">
<meta property="og:url" content="http://jtelszasz.github.io/blog_project/articles/Energy-Use-and-Weather">
<meta property="og:site_name" content="The Training Set">





<link rel="canonical" href="http://jtelszasz.github.io/blog_project/articles/Energy-Use-and-Weather">
<link href="http://jtelszasz.github.io/blog_project/feed.xml" type="application/atom+xml" rel="alternate" title="The Training Set Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://jtelszasz.github.io/blog_project/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="http://jtelszasz.github.io/blog_project/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://jtelszasz.github.io/blog_project/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://jtelszasz.github.io/blog_project/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://jtelszasz.github.io/blog_project/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://jtelszasz.github.io/blog_project/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://jtelszasz.github.io/blog_project/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://jtelszasz.github.io/blog_project/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://jtelszasz.github.io/blog_project/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://jtelszasz.github.io/blog_project">The Training Set</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="http://jtelszasz.github.io/blog_project/about/" >About</a></li>
		        
				<li><a href="http://jtelszasz.github.io/blog_project/articles/" >Articles</a></li>
		        
				<li><a href="http://jtelszasz.github.io/blog_project/the-work/" >The Work</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="http://jtelszasz.github.io/blog_project/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->

<div class="image-wrap">
  <img src="http://jtelszasz.github.io/blog_project/images/texture-feature-05.jpg" alt="Energy Use and Weather feature image" itemprop="primaryImageOfPage">
  <span class="image-credit">Photo Credit: <a href="http://texturelovers.com">Texture Lovers</a></span>
</div><!-- /.image-wrap -->

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-side">
    <!--<img src="http://jtelszasz.github.io/blog_project/images/" class="bio-photo" alt="Justin Elszasz bio photo"></a>-->
<h3>Justin Elszasz</h3>
<p>Engineering background, indeterminate foreground.</p>

<a href="http://facebook.com/jtelszasz" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="http://linkedin.com/in/justinelszasz" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>

<a href="http://github.com/jtelszasz" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>


  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      <h1 itemprop="name">Energy Use and Weather</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <section id="table-of-contents" class="toc">
  <header>
    <h3>Contents</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#statistical-model">Statistical Model</a></li>
  <li><a href="#engineering-model">Engineering Model</a></li>
</ul>

  </div>
</section>
<!-- /#table-of-contents -->

<p>Stepping back, let’s take a look at what the actual time series of the smart meter electricity data looks like for my apartment.  I’ll also bring in the hourly outdoor temperature as measured at Baltimore-Washington International Airport (less than 10 miles away as the crow flies).  The data are obtained via the API at <a href="http://www.wunderground.com/weather/api">Weather Underground</a>.  Again, you can follow along my line (curve, circle, some other obscure geometry) of thinking by taking a look at the <a href="http://nbviewer.ipython.org/github/jtelszasz/my_energy/blob/master/My_Energy_And_Weather.ipynb?create=1">iPython notebook</a>.</p>

<figure>
  <a href="http://jtelszasz.github.io/blog_project/images/Elec_and_Temp_TS.png"><img src="http://jtelszasz.github.io/blog_project/images/Elec_and_Temp_TS.png" /></a>
  <figcaption>Time series of hourly electricity consumption and outdoor temperature.</figcaption>
</figure>

<p>It looks as if there’s an inverse relationship between the outdoor temperature and the apartment’s electricity consumption.  We’d expect this even in the winter for our apartment due to our use of electric resistance heating.  (This is a minority case as many buildings, whether commercial, multi-family, or single-family residential, burn fossil fuels directly for providing heat.  As a precursor to a potential future analysis I’d like to work on using these data, there’s often a debate whether the GHG emissions resulting from electric resistance heating are in fact on par or greater with burning natural gas directly in a furnace on site.  This is due to losses in the electric grid - first the combustion and thermal efficiency of the generation plant itself, then the various lossy inverters required for changing voltages and losses in the transmission lines themselves.  While this is an important question to ask, the broader picture and motivation should be the integration of renewables and storage to provide heat cleanly - electric resistance allows for this integration.)</p>

<p>Back to the temperature vs. electricity use question.  To start digging into the relationship a bit, we’ll start with the scatter plot.</p>

<figure>
  <a href="http://jtelszasz.github.io/blog_project/images/Elec_and_Temp_Scatter.png"><img src="http://jtelszasz.github.io/blog_project/images/Elec_and_Temp_Scatter.png" /></a>
  <figcaption>Scatter plot of hourly electricity consumption and outdoor temperature.</figcaption>
</figure>

<p>As we’d expect, as the outdoor temperature increases, the electricity use generally decreases.  </p>

<h3 id="statistical-model">Statistical Model</h3>

<p>To take a first crack at quantifying the relationship we can use an ordinary least squares regression to try and quantify that relationship.  As is typically the case with Python, someone has already coded the tools necessary so I just have to import the Statsmodels module and use the right tool.</p>

<p>Running the following block of code…</p>

<div class="highlight"><pre><code class="python"><span class="n">model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">elec_and_weather</span><span class="p">[</span><span class="s">&#39;USAGE&#39;</span><span class="p">],</span><span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">elec_and_weather</span><span class="p">[</span><span class="s">&#39;tempF&#39;</span><span class="p">]))</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="k">print</span> <span class="n">res</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</code></pre></div>

<p>…fits the model to our data and spits out the information about the model.</p>

<figure>
  <a href="http://jtelszasz.github.io/blog_project/images/Elec_and_Temp_OLS_Output.png"><img src="http://jtelszasz.github.io/blog_project/images/Elec_and_Temp_OLS_Output.png" /></a>
  <figcaption>Ordinary least squares regression model.</figcaption>
</figure>

<p>This is what the model actually looks like on top of the data.</p>

<figure>
  <a href="http://jtelszasz.github.io/blog_project/images/Elec_and_Temp_OLS.png"><img src="http://jtelszasz.github.io/blog_project/images/Elec_and_Temp_OLS.png" /></a>
  <figcaption>Linear ordinary least squares regression model for electricity consumption using outdoor temperature.</figcaption>
</figure>

<p>So our R^2 shows that 48% of the variation in the electricity use can be explained by the outdoor temperature alone.  The remaining 52% would have to be explained by other variables or natural variability.</p>

<h3 id="engineering-model">Engineering Model</h3>

<p>What are we saying by assuming that the model should be linear?  That (all else being equal) for every degree increase in the outdoor temperature, there should be a proportional decrease in the electricity consumption.  There’s a reason this is a valid assumption, again negelecting the otherwise stochastic behavior as a result of weather and occupancy/behavior.  The underlying heat transfer equation is:</p>

<p><img src="http://latex.codecogs.com/png.latex?Q = hA \Delta T" alt="Q = hA \Delta T" /></p>

<ul>
  <li>where <img src="http://latex.codecogs.com/png.latex?\inline Q" alt="Q" /> is a heat flow rate</li>
  <li><img src="http://latex.codecogs.com/png.latex?\inline h" alt="h" /> is a characteristic heat transfer coefficient</li>
  <li><img src="http://latex.codecogs.com/png.latex?\inline A" alt="A" /> is the perpendicular area through which heat is passing</li>
  <li>and <img src="http://latex.codecogs.com/png.latex?\inline \Delta T" alt="\Delta T" /> is the temperature difference across the boundary through which heat is being transmitted, in this case outdoor and indoor temperature</li>
</ul>

<p>If we were to assume that the behavior in the apartment was constant - the same lights were always on, the same devices were always charging, the refrigerator compressor was always running - if we assumed that the thermostat was always set at 70 degrees, and we assumed that the only part of the weather that ever changed was the temperature (humidity and wind were constant) the linear regression model we ran earlier would exactly mirror this equation.  The variation in the electricity consumption would be entirely explained by the change in outdoor temperature, and the slope of the line would be the overall heat transfer coefficient of the apartment (through walls, windows, doors, floors, ceilings, leakage, etc.) multiplied by the square area of the apartment boundary.  By installing higher R-value insulation in the walls or replacing our old drafty windows with triple-glazing, Argon-filled windows, we’d be altering the overall heat transfer coefficient <img src="http://latex.codecogs.com/png.latex?\inline h" alt="h" /> and effectively reducing the slope of the line we fit to the data.  We can also alter the line’s slope by changing the thermostat setting; remember, the temperature difference <img src="http://latex.codecogs.com/png.latex?\inline \Delta T" alt="\Delta T" /> we’re talking about is the difference between the outdoor and indoor temperatures.</p>

<p>As in all things, there is no true black (statistics) and white (engineering) - there are only grays.  In this regard smart meters can  obviously help us learn about buildings in addition to occupancy/behavior.  With clever algorithms (not the simple linear model I’ve used above) we can start to disaggregate energy consumption into its constituent parts - building response to weather and occupancy behavior.  Indeed, we’ve begun to do this.  For example, BGE recommends different energy efficiency actions I can take based on my consumption patterns.  But this is just a first step in how these data can be used, even just at individual residence level.  I’m imagining exploring in future analyses how to use these data to size battery storage and solar photovoltaics.</p>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          <!--<img src="http://jtelszasz.github.io/blog_project/images/" class="bio-photo" alt="Justin Elszasz bio photo"></a>-->
<h3>Justin Elszasz</h3>
<p>Engineering background, indeterminate foreground.</p>

<a href="http://facebook.com/jtelszasz" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="http://linkedin.com/in/justinelszasz" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>

<a href="http://github.com/jtelszasz" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>


        </div>
        <p class="byline"><strong>Energy Use and Weather</strong> was published on <time datetime="2014-04-18T00:00:00-04:00" itemprop="datePublished">April 18, 2014</time> and last modified on <time datetime="2014-04-18" itemprop="dateModified">April 18, 2014</time> by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name"><a href="http://jtelszasz.github.io/blog_project/about" title="About Justin Elszasz" itemprop="url">Justin Elszasz</a></span></span>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://jtelszasz.github.io/blog_project/articles">View all articles</a>)</small></h4>
    <ul>
    
      
      
        
          
        
      
      
      <li><a href="http://jtelszasz.github.io/blog_project/articles/Predicting-Energy-Use-with-Support-Vector-Machines" title="Forecasting with Machine Learning">Forecasting with Machine Learning</a></li>
      
    
      
      
        
          
        
      
      
      <li><a href="http://jtelszasz.github.io/blog_project/articles/Autocorrelation" title="Electricity Usage Autocorrelation">Electricity Usage Autocorrelation</a></li>
      
    
      
      
        
          
        
      
      
      <li><a href="http://jtelszasz.github.io/blog_project/articles/More-Smart-Meter-Data" title="More Smart Meter Data...">More Smart Meter Data...</a></li>
      
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2014 Justin Elszasz. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://jtelszasz.github.io/blog_project/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://jtelszasz.github.io/blog_project/assets/js/scripts.min.js"></script>
	        

</body>
</html>
