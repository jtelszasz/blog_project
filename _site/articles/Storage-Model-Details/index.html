<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Storage Model Details &#8211; The Training Set.</title>
<meta name="description" content="Some details of the new demand-side storage model.">
<meta name="keywords" content="BGE, Green-Button, data, electricity, dynamic-pricing, storage, model, demand-side">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.thetrainingset.com/images/">
<meta name="twitter:title" content="Storage Model Details">
<meta name="twitter:description" content="Some details of the new demand-side storage model.">
<meta name="twitter:creator" content="@jtelszasz">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Storage Model Details">
<meta property="og:description" content="Some details of the new demand-side storage model.">
<meta property="og:url" content="http://www.thetrainingset.com/articles/Storage-Model-Details">
<meta property="og:site_name" content="The Training Set.">





<link rel="canonical" href="http://www.thetrainingset.com/articles/Storage-Model-Details">
<link href="http://www.thetrainingset.com/feed.xml" type="application/atom+xml" rel="alternate" title="The Training Set. Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://www.thetrainingset.com/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://www.thetrainingset.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://www.thetrainingset.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://www.thetrainingset.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://www.thetrainingset.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.thetrainingset.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.thetrainingset.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.thetrainingset.com/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://www.thetrainingset.com">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://www.thetrainingset.com/images/bio-photo.jpg" alt="Justin Elszasz photo" class="author-photo">
					<h4>Justin Elszasz</h4>
					<p>Engineering background, indeterminate foreground.</p>
				</li>
				<li><a href="http://www.thetrainingset.com/about/">Learn More</a></li>
				<li>
					<a href="mailto:thetrainingset@gmail.com"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/jtelszasz"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				
				<li>
					<a href="http://linkedin.com/in/justinelszasz"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/jtelszasz"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://www.thetrainingset.com/posts/">All Posts</a></li>
				<li><a href="http://www.thetrainingset.com/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://www.thetrainingset.com/the-work/">The Work</a></li><li><a href="http://www.thetrainingset.com/my-elec-use/">My Electricity Use</a></li><li><a href="http://www.thetrainingset.com/subscribe/">Subscribe</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Storage-Model-Details" rel="bookmark" title="Storage Model Details">Storage Model Details</a></h1>
        
        <h2>October 09, 2014</h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>This post fills in some more details of the <a href="http://www.thetrainingset.com/articles/Intro-To-Storage-Model">demand-side storage model</a>.</p>

<p>In the last post I presented a flow chart of how the logic works but didn’t give a diagram of what the physical system might look like.  That’s below.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-10/physical_system.jpg"><img src="http://www.thetrainingset.com/images/2014-10/physical_system.jpg" /></a>
  <figcaption>Demand-side storage physical system.</figcaption>
</figure>
</center>

<p>I’ve illustrated the switch as being a separate component so we can see that electricity could bypass actually being inverted and stored (electricity from the grid sometimes goes directly to the demand).  In reality, the inverter/switch/charge controller would be one system.  This unit and the batteries would be the initial costs for the system.</p>

<h2 id="model-parameters">Model Parameters</h2>

<p>For electricity going straight to serve demand (not being stored first), there are essentially no additonal losses.  However, batteries only accept DC electricity, so we need an inverter to turn the AC off the grid to DC and back.  There are losses associated with this conversion, and the batteries themselves are lossy.  For now I’ve set these efficiencies as constants, but implemented them in functions so they could in the future get more sophisticated modeling (charging efficiency for batteries is dependent on depth of charge).  The nominal efficiency values are taken from <a href="http://www.amazon.com/Renewable-Efficient-Electric-Power-Systems/dp/0471280607/ref=sr_1_2?ie=UTF8&amp;qid=1412769771&amp;sr=8-2&amp;keywords=renewable+and+efficient+electric+power+systems">Renewable and Efficient Electric Power Systems by Gilbert Masters</a>.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">inverter_efficiency</span><span class="p">(</span><span class="n">direction</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s">&#39;charging&#39;</span><span class="p">:</span>
        <span class="n">eff</span> <span class="o">=</span> <span class="o">.</span><span class="mi">85</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s">&#39;discharging&#39;</span><span class="p">:</span>
        <span class="n">eff</span> <span class="o">=</span> <span class="o">.</span><span class="mi">85</span>
    <span class="k">return</span> <span class="n">eff</span>

<span class="k">def</span> <span class="nf">battery_efficiency</span><span class="p">(</span><span class="n">direction</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s">&#39;charging&#39;</span><span class="p">:</span>
        <span class="n">eff</span> <span class="o">=</span> <span class="o">.</span><span class="mi">85</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s">&#39;discharging&#39;</span><span class="p">:</span>
        <span class="n">eff</span> <span class="o">=</span> <span class="o">.</span><span class="mi">85</span>
    <span class="k">return</span> <span class="n">eff</span></code></pre></div>

<p>There are also several other system parameters that need to be initialized, including the size of the storage, costs, etc.  In future analyses these variables can be varied to assess the effects on costs and energy.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">inverter_controller_cost</span> <span class="o">=</span> <span class="mf">2000.</span> <span class="c"># ballpark</span>
<span class="n">storage_cost_perkWh</span> <span class="o">=</span> <span class="mf">200.</span> <span class="o">/</span> <span class="mf">1.2</span> <span class="c"># cost per kWh; amazon.com lead-acid deep cycle</span>
<span class="n">storage_size_kWh</span> <span class="o">=</span> <span class="mf">9.</span>  <span class="c"># storage size in kWh</span>
<span class="n">P_max_charge</span> <span class="o">=</span> <span class="p">(</span><span class="mf">100.</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">)</span> <span class="o">*</span> <span class="mf">12.</span> <span class="o">/</span> <span class="mf">1000.</span> <span class="c"># C/3 charge rate at 12 V (converted to kW)</span>
<span class="n">E_min_depth</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c"># maximum depth of discharge in percent</span>
<span class="n">E_min</span> <span class="o">=</span> <span class="n">E_min_depth</span> <span class="o">*</span> <span class="n">storage_size_kWh</span></code></pre></div>

<h2 id="results">Results</h2>

<p>Once the model has calculated all the energy flows for each hour over the course of the year, I calculate a set of key properties of the system behavior.  These results are shown in the table below.  These are the characteristics I’ll be interested in as the system parameters described above are varied (though I may modify this set).</p>

<ul>
  <li>’% Peak Demand Battery’: Percent of the total peak demand over the year served from the battery</li>
  <li>’% Peak kWh Shaved’: Percent of the total demand during peak hours removed from the grid</li>
  <li>’% Purchased During Off-Peak’: Percent of annual electricity purchased during off-peak hours</li>
  <li>’% Purchased During Peak’: Percent of annual electricity purchased during peak hours</li>
  <li>‘Annual System Eff’: Total annual demand divided by total annual electricity purchased</li>
  <li>‘Annual Var Cost’: Annual electricity cost</li>
  <li>‘Hours Battery Depleted’: Number of hours in the year that battery is drained to maximum depth of discharge</li>
  <li>‘Hours Battery Full’: Number of hours in the year that battery is fully charged</li>
  <li>‘Hours on Battery Only’: Number of hours in the year that demand is served by battery alone</li>
  <li>‘Initial Cost’: Initial system cost (inverter + batteries)</li>
  <li>‘Peak kWh Shaved’: Total electricity during peak hours removed from the grid</li>
  <li>‘Total kWh Purchased’: Total annual electricity purchased</li>
</ul>

<p>Below are some initial values from the simulation with a storage size of 9 kWh.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">{</span>   <span class="s">&#39;% Peak Demand Battery&#39;</span><span class="p">:</span> <span class="mf">0.62841144933029902</span><span class="p">,</span>
    <span class="s">&#39;% Peak kWh Shaved&#39;</span><span class="p">:</span> <span class="mf">0.54435814423603923</span><span class="p">,</span>
    <span class="s">&#39;% Purchased During Off-Peak&#39;</span><span class="p">:</span> <span class="mf">0.90852312473716113</span><span class="p">,</span>
    <span class="s">&#39;% Purchased During Peak&#39;</span><span class="p">:</span> <span class="mf">0.091476875262838833</span><span class="p">,</span>
    <span class="s">&#39;Annual System Eff&#39;</span><span class="p">:</span> <span class="mf">0.93101271339465896</span><span class="p">,</span>
    <span class="s">&#39;Annual Var Cost&#39;</span><span class="p">:</span> <span class="mf">572.33</span><span class="p">,</span>
    <span class="s">&#39;Hours Battery Depleted&#39;</span><span class="p">:</span> <span class="mi">1087</span><span class="p">,</span>
    <span class="s">&#39;Hours Battery Full&#39;</span><span class="p">:</span> <span class="mi">1863</span><span class="p">,</span>
    <span class="s">&#39;Hours on Battery Only&#39;</span><span class="p">:</span> <span class="mi">1169</span><span class="p">,</span>
    <span class="s">&#39;Initial Cost&#39;</span><span class="p">:</span> <span class="mf">3500.0</span><span class="p">,</span>
    <span class="s">&#39;Peak kWh Shaved&#39;</span><span class="p">:</span> <span class="mf">979.38848750000284</span><span class="p">,</span>
    <span class="s">&#39;Total kWh Purchased&#39;</span><span class="p">:</span> <span class="mf">8961.5382045414281</span>    <span class="p">}</span></code></pre></div>

<p>For these initial values, what stood out to me was that I removed 54% of the residence’s annual peak demand from the grid (this is the ‘% Peak kWh Shaved’).  This is the reason utilities might want to think about incentivizing residential customers to purchase grid-tied battery systems such as this (beyond just the time-of-use-pricing incentive itself).  I should say that the current model is agnostic to exactly which peak hours load is being shaved from - it just uses the battery first until it’s depleted and then switches to grid during peak hours.  Utilities would want to be a bit more sensitive to this, since their peak time-of-use currently starts at 10am weekdays in the summer but the actual “peak” won’t hit until around 4pm.  In the current model I’ve created, the battery is used up first so I wouldn’t be shaving peak load at 4pm.  This could be addressed with some logic that is a bit more clever than what I’ve currently got.</p>


      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://www.thetrainingset.com/tags/#BGE" title="Pages tagged BGE" class="tag">BGE</a><a href="http://www.thetrainingset.com/tags/#Green-Button" title="Pages tagged Green-Button" class="tag">Green-Button</a><a href="http://www.thetrainingset.com/tags/#data" title="Pages tagged data" class="tag">data</a><a href="http://www.thetrainingset.com/tags/#electricity" title="Pages tagged electricity" class="tag">electricity</a><a href="http://www.thetrainingset.com/tags/#dynamic-pricing" title="Pages tagged dynamic-pricing" class="tag">dynamic-pricing</a><a href="http://www.thetrainingset.com/tags/#storage" title="Pages tagged storage" class="tag">storage</a><a href="http://www.thetrainingset.com/tags/#model" title="Pages tagged model" class="tag">model</a><a href="http://www.thetrainingset.com/tags/#demand-side" title="Pages tagged demand-side" class="tag">demand-side</a></span>
        <span><a href="http://www.thetrainingset.com/articles/Storage-Model-Details" rel="bookmark" title="Storage Model Details">Storage Model Details</a> was published on <span class="entry-date date published updated"><time datetime="2014-10-09T00:00:00-04:00">October 09, 2014</time></span></span>
        (revised: <span class="entry-date date modified"><time datetime="2014-10-09">10/09/2014</time></span>)
        <span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
        <div class="social-share">
          <ul class="socialcount socialcount-small inline-list">
            <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://www.thetrainingset.com/articles/Storage-Model-Details" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
            <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://www.thetrainingset.com/articles/Storage-Model-Details" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
            <li class="googleplus"><a href="https://plus.google.com/share?url=http://www.thetrainingset.com/articles/Storage-Model-Details" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
          </ul>
        </div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://www.thetrainingset.com/articles/Intro-To-Storage-Model" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://www.thetrainingset.com/articles/Upcoming-Events-You-Should-Attend" title="Upcoming Events You Should Check Out">Upcoming Events You Should Check Out</a></h3>
          <p>I'll be giving a couple of public talks about my work on this website. <a href="http://www.thetrainingset.com/articles/Upcoming-Events-You-Should-Attend">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://www.thetrainingset.com/articles/This-Is-What-We-Pay-Officers-Who-Arrested-Freddie-Gray" title="This is How Much We Paid Officers Involved in the Freddie Gray Debacle">This is How Much We Paid Officers Involved in the Freddie Gray Debacle</a></h4>
            <span>Published on April 26, 2015</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://www.thetrainingset.com/articles/Thanks-Technically-Baltimore" title="Thanks Technical.ly Baltimore!">Thanks Technical.ly Baltimore!</a></h4>
            <span>Published on April 23, 2015</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Justin Elszasz. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://www.thetrainingset.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://www.thetrainingset.com/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58835878-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

	        

</body>
</html>
