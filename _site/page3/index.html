<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; The Training Set.</title>
<meta name="description" content="Energy and data, coming at you live from the MARC train.">
<meta name="keywords" content="energy, open-data, hacking">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://www.thetrainingset.com/images/design/ny_concrete_10.JPG">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="Energy and data, coming at you live from the MARC train.">
<meta name="twitter:creator" content="@jtelszasz">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Energy and data, coming at you live from the MARC train.">
<meta property="og:url" content="http://www.thetrainingset.com/page3/index.html">
<meta property="og:site_name" content="The Training Set.">





<link rel="canonical" href="http://www.thetrainingset.com/page3/">
<link href="http://www.thetrainingset.com/feed.xml" type="application/atom+xml" rel="alternate" title="The Training Set. Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://www.thetrainingset.com/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://www.thetrainingset.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://www.thetrainingset.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://www.thetrainingset.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://www.thetrainingset.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.thetrainingset.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.thetrainingset.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.thetrainingset.com/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://www.thetrainingset.com">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://www.thetrainingset.com/images/bio-photo.jpg" alt="Justin Elszasz photo" class="author-photo">
					<h4>Justin Elszasz</h4>
					<p>Engineering background, indeterminate foreground.</p>
				</li>
				<li><a href="http://www.thetrainingset.com/about/">Learn More</a></li>
				<li>
					<a href="mailto:thetrainingset@gmail.com"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/jtelszasz"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				
				<li>
					<a href="http://linkedin.com/in/justinelszasz"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/jtelszasz"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://www.thetrainingset.com/posts/">All Posts</a></li>
				<li><a href="http://www.thetrainingset.com/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://www.thetrainingset.com/the-work/">The Work</a></li><li><a href="http://www.thetrainingset.com/my-elec-use/">My Electricity Use</a></li><li><a href="http://www.thetrainingset.com/subscribe/">Subscribe</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://www.fudgegraphics.com">Fudgegraphics</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="http://www.thetrainingset.com/images/design/ny_concrete_10.JPG" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>The Training Set.</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-01-21T00:00:00-05:00"><a href="http://www.thetrainingset.com/articles/Baltimores-Lost-Traffic-Camera-Revenue">January 21, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Baltimores-Lost-Traffic-Camera-Revenue" rel="bookmark" title="The Lost Revenue of the Baltimore Traffic Cameras" itemprop="url">The Lost Revenue of the Baltimore Traffic Cameras</a></h1>
    
  </header>
  <div class="entry-content">
    <p>The title of the dataset I’m working with on Baltimore’s <a href="http://data.baltimorecity.gov/">open data portal</a> is “Parking Citations.”  I downloaded a snapshot of the dataset which ended up being 2,689,647 total citations through January 12, 2015. </p>

<center>
<div><iframe width="500px" title="Parking Citations" height="425px" src="https://data.baltimorecity.gov/w/n4ma-fj3m/ta62-x9wp?cur=i5SwBTR0Hvd&amp;from=root" frameborder="0" scrolling="no"><a href="https://data.baltimorecity.gov/Transportation/Parking-Citations/n4ma-fj3m" title="Parking Citations" target="_blank">Parking Citations</a></iframe><p><a href="http://www.socrata.com/" target="_blank">Powered by Socrata</a></p></div>
</center>

<p>But parking is not the only thing captured in this set. Traffic camera violations are also here (“Fixed Speed Cameras,” “Mobile Speed Cameras,” and probably some “Red Light Violations” and “Right on Red” citations) which were far and away the city’s largest revenue generator out of all of the infraction types captured here.  The fixed speed cameras alone issued nearly $28 million in citations over a three year period, until the <a href="http://www.baltimoresun.com/news/maryland/sun-investigates/bs-md-speed-camera-hearing-20141201-story.html">program was ended</a>.  The last two rows appear to be one-off citations.  It’s also curious that the last record of a “Snow Emergency Route Violation” was in August. In Baltimore.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2015-01/citation_desc_date_range_OLD.png"><img src="http://www.thetrainingset.com/images/2015-01/citation_desc_date_range_OLD.png" /></a>
  <figcaption>Citation descriptions sorted by total fines.  Highlighted in red are the least recent dates of the last recorded citation and the shortest data time spans, respectively.  Highlighted in green are the largest annual revenue generators.</figcaption>
</figure>
</center>

<p>This all isn’t quite syncing up with what the <a href="http://www.baltimoresun.com/news/maryland/sun-investigates/bs-md-speed-camera-hearing-20141201-story.html">Baltimore Sun reported</a> about the traffic camera program.  According to this article, the traffic camera program generated about $140 million over 10 years.  The data contained in Baltimore’s open data portal must be incomplete, since I’m seeing a total of about $127 million for all violation types, not just cameras.  </p>

<p>To show this a bit more dramatically, here’s the time series of total monthly citations issued for the top 10 revenue generator categories.  It’s pretty clear that the data are incomplete since the traffic camera categories should have dominated for 10 years straight, and we’re seeing no significant records before 2007, even though the earliest start dates shown in the table above show dates typically starting in 2002-2003, with “Red Light Violations” starting in 1999.  Unfortunately, the Baltimore open data portal does not provide a data dictionary or substantive description of what all is contained in the dataset and what each field represents.  For example, in addition to “violFine,” there are “balance,” “openFine,” and “openPenalty” fields which all include “$” signs in the records to indicate currency.  These aren’t defined anywhere.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2015-01/Top10_Monthly_Citation_TS_OLD.png"><img src="http://www.thetrainingset.com/images/2015-01/Top10_Monthly_Citation_TS_OLD.png" /></a>
  <figcaption>Total monthly citations for top 10 revenue generators.</figcaption>
</figure>
</center>

<p>I wouldn’t say that the lack of definitions and descriptions of the data render them completely useless, but it does make it more difficult to make apples-to-apples comparisons and draw conclusions.</p>

<hr />
<p>This is a new section I’m adding, inspired by Ben Wellington’s excellent blog <a href="http://iquantny.tumblr.com">I Quant NY</a>.</p>

<p><em>Data obtained from <a href="http://data.baltimorecity.gov/">Open Baltimore.</a></em></p>

<p><em>Analysis conducted using <a href="http://www.python.org">Python</a>, <a href="http://pandas.pydata.org">Pandas</a>, and Microsoft Excel.</em></p>

<p><em>Inspiration from <a href="http://iquantny.tumblr.com">I Quant NY</a>.</em></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-01-08T00:00:00-05:00"><a href="http://www.thetrainingset.com/articles/Importing-CSV-Files">January 08, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Importing-CSV-Files" rel="bookmark" title="Importing Lots of CSV's" itemprop="url">Importing Lots of CSV's</a></h1>
    
  </header>
  <div class="entry-content">
    <p>I find myself importing a slew of comma-separated value (csv) files quite often so I wrote up a quick bit of code to handle it.  </p>

<p>It’s uber-simple - just loops through all the csv’s in a directory, appends them to one Pandas dataframe, and saves the new csv.  It also tacks on the filenames of each file if separating into the original files is needed later.  This also assumes all the fields are named exactly the same in all the csv files.  Sure beats reading each individually and merging after.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">glob</span>

<span class="n">path</span> <span class="o">=</span> <span class="s">&#39;data_csv&#39;</span>

<span class="n">allFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s">&#39;/*.csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">filename</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">allFiles</span><span class="p">):</span>

    <span class="n">df_file</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">df_file</span><span class="p">[</span><span class="s">&#39;filename&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="n">df_file</span><span class="p">[</span><span class="s">&#39;file_ID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_file</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">&#39;full_dataset.csv&#39;</span><span class="p">)</span></code></pre></div>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-12-25T00:00:00-05:00"><a href="http://www.thetrainingset.com/articles/More-Pointless-Data-Viz">December 25, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/More-Pointless-Data-Viz" rel="bookmark" title="Excessive Data Visualization" itemprop="url">Excessive Data Visualization</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Christmas Day.  I’m bored.  </p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-12/Average_Days_thru_Nov_2014.png"><img src="http://www.thetrainingset.com/images/2014-12/Average_Days_thru_Nov_2014.png" /></a>
  <figcaption>Average daily electricity usage.</figcaption>
</figure>
</center>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-12/Days_thru_Nov_2014.png"><img src="http://www.thetrainingset.com/images/2014-12/Days_thru_Nov_2014.png" /></a>
  <figcaption>All days and average consumption.</figcaption>
</figure>
</center>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-11-14T00:00:00-05:00"><a href="http://www.thetrainingset.com/articles/Assessing-System-Performance">November 14, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Assessing-System-Performance" rel="bookmark" title="Assessing Demand-Side Storage System Performance" itemprop="url">Assessing Demand-Side Storage System Performance</a></h1>
    
  </header>
  <div class="entry-content">
    <p>By varying parameters of the <a href="http://www.thetrainingset.com/articles/Intro-To-Storage-Model">demand-side storage model</a> we can determine the economic plausibility and benefits of home grid-tied batteries.  </p>

<p>While the actual logic and functions are in separate Python modules, I’m doing this analysis in an <a href="http://nbviewer.ipython.org/github/jtelszasz/demandside_storage/blob/master/analysis.ipynb">iPython notebook</a> that you can check out for more detail and thought process.</p>

<p>I set up some of summary metrics I was interested in in the <a href="http://www.thetrainingset.com/articles/Storage-Model-Details">last post</a> .  One that I didn’t have on that list that is an important economic indicator is the simple payback period, which is the number of years it would take to break even on the initial investment based on the yearly savings.</p>

<center>
<img src="http://latex.codecogs.com/png.latex?PBP=\frac{Initial%20Investment}{Annual%20Variable%20Cost%20Savings}" alt="PBP=\frac{Initial%20Investment}{Annual%20Variable%20Cost%20Savings}" />
</center>

<p>The summary metrics I’ve calculated should indicate the benefits of having a home battery system to the consumer/household as well as the grid (system operator and grid).  Of course, these are going to be particular to the load profile I’m using (Green Button sample data), but another one-year hourly load profile could easily be supplanted to see how it would work out for other buildings.  </p>

<h2 id="summary-metrics-v-storage-capacity">Summary Metrics v. Storage Capacity</h2>

<p>One question that can be asked of the model is how certain summary metrics vary with the total battery capacity.  For example, an increase in battery size would allow the building to purchase more of the cheaper electricity during off-peak hours increasing the annual savings, but the initial investment also increases.  </p>

<p>All of the other parameters are held constant, with battery and inverter efficiencies during charging and discharging all set to 0.85 (the “inverter_efficiency” and “battery_efficiency” below are function handles).  The charge rate estimate is assuming it take 8 hours to fully charge the battery.  I’ve estimated the cost of deep-discharge lead acid batteries as being about $166 per kilowatt-hour of storage (based on a quick Amazon.com search that dug up $200 for a 1.2 kWh battery).  The model currently isn’t sophisticated enough to vary the charge and discharge rates based on voltage and current as should be done, but this should suffice for a rough estimate.  For an initial estimate, I also have not factored in battery replacement to the payback period, though this should have a substantial effect and I’ll need to do this at some point.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">system_param</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;Inverter Cost&#39;</span> <span class="p">:</span> <span class="mf">1500.</span><span class="p">,</span> <span class="c"># ballpark</span>
        <span class="s">&#39;Storage Cost&#39;</span> <span class="p">:</span> <span class="mf">200.</span> <span class="o">/</span> <span class="mf">1.2</span><span class="p">,</span> <span class="c"># cost per kilowatt-hour based on link above</span>
        <span class="s">&#39;Storage Size&#39;</span> <span class="p">:</span> <span class="n">bat_size</span><span class="p">,</span>  <span class="c"># storage size in kilowatt-hours</span>
        <span class="s">&#39;Max Charge Rate&#39;</span> <span class="p">:</span> <span class="n">bat_size</span> <span class="o">/</span> <span class="mf">8.</span><span class="p">,</span>
        <span class="s">&#39;Max DOD&#39;</span> <span class="p">:</span> <span class="n">max_dod</span><span class="p">,</span> <span class="c"># DOD</span>
        <span class="s">&#39;Bat Depleted&#39;</span> <span class="p">:</span> <span class="n">max_dod</span> <span class="o">*</span> <span class="n">bat_size</span><span class="p">,</span>
        <span class="s">&#39;Inverter Efficiency&#39;</span> <span class="p">:</span> <span class="n">inverter_efficiency</span><span class="p">,</span>
        <span class="s">&#39;Battery Efficiency&#39;</span> <span class="p">:</span> <span class="n">battery_efficiency</span><span class="p">,</span>
    <span class="p">}</span></code></pre></div>

<p>In the <a href="http://nbviewer.ipython.org/github/jtelszasz/demandside_storage/blob/master/analysis.ipynb">analysis notebook</a> I create an array with all of the battery sizes, and loop through them each time setting the bat_size variable to the next size in the array.  Each time, the model creates the output over the entire year (all 8,760 hours) and then calculates the summary metrics.  The result is a dataframe of all the summary metrics indexed by summary size.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-11/metrics_snapshot_stor_cap.jpg"><img src="http://www.thetrainingset.com/images/2014-11/metrics_snapshot_stor_cap.jpg" /></a>
  <figcaption>Simple payback period for demand-side storage (home battery) system.</figcaption>
</figure>
</center>

<p>Now it’s easy to create some plots to illustrate how these metrics change with storage capacity.</p>

<h3 id="cost-savings-and-payback-period">Cost Savings and Payback Period</h3>

<p>The expectation is that there are diminishing returns, since there is a limited number of peak hours energy demand that can be supplied by electricity purchased during off-peak hours, while of course the amount of battery storage we can purchase is unlimited.  Based on this plot, the most storage we should purchase is 15 kWh worth.  The percent savings calculated is with respect to the default static BGE residential electricity prices, in other words what this home would have paid over the course of the year in electricity supplied (not including fixed tariffs and charges).</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-11/cost_savings_stor_cap.png"><img src="http://www.thetrainingset.com/images/2014-11/cost_savings_stor_cap.png" /></a>
  <figcaption>Annual cost savings for demand-side storage (home battery) system.</figcaption>
</figure>
</center>

<p>In general, the payback periods are a bit longer than I thought they would be.  There’s a clear optimum solution at a storage capacity of 5 kWh with the payback period being about 14.5 years.  What’s really driving the cost effectiveness (I think) is the difference between the peak and off-peak cost of electricity.  A wider difference between these prices will make it more cost effective to purchase storage and electricity during off-peak hours.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-11/PBP_stor_cap.png"><img src="http://www.thetrainingset.com/images/2014-11/PBP_stor_cap.png" /></a>
  <figcaption>Simple payback period for demand-side storage (home battery) system.</figcaption>
</figure>
</center>

<h3 id="grid-benefits-load-shaving">Grid Benefits (Load Shaving)</h3>

<p>This pretty closely mirrors the cost savings, and understandably so since the costs are directly proportional to the amount of electricity being removed from peak-hours and purchased instead during off-peak hours.  At 15 kWh of storage we’ve just about maxed out the amount of peak time kilowatt-hours we can shave, which is all off the electricity demand for this house occuring during peak hours.  This is about 1800 kWh for this house’s load profile.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-11/peak_shaved_stor_cap.png"><img src="http://www.thetrainingset.com/images/2014-11/peak_shaved_stor_cap.png" /></a>
  <figcaption>Peak load shaving for demand-side storage (home battery) system.</figcaption>
</figure>
</center>

<h3 id="efficiency">Efficiency</h3>

<p>Since electricity purchased simultanesously with demand (not shifted using storage) doesn’t go through any other equipment, the system’s efficiency is effectively 100% since all the electricity purchased goes directly to the serve the demand.  However, electricity purchased during off-peak hours for use at a later time first goes through the inverter to become DC, then is stored in the battery (also lossy), and takes the opposite process on the way out.  That means that the quantity of kilowatt-hours purchased from the grid becomes higher as more electricity is bought and stored.  For this reason, the “efficiency” (the total annual kWh demand divided by the total kWh purchased from the grid) drops as storage size increases. </p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-11/sys_eff_stor_cap.png"><img src="http://www.thetrainingset.com/images/2014-11/sys_eff_stor_cap.png" /></a>
  <figcaption>Total kWh purchased during year for demand-side storage (home battery) system.</figcaption>
</figure>
</center>

<p>This is an important (albeit predictable) result since it means we’ve effectively increased the carbon footprint of the home, assuming the electricity mix is dominated by carbon-intensive power sources.  What such a system could allow for, however, is that intermittent renewable resources could more readily integrate with storage acting as a buffer between demand and intermittent supply.</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-11-11T00:00:00-05:00"><a href="http://www.thetrainingset.com/articles/Heat-Map">November 11, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Heat-Map" rel="bookmark" title="Demand Heat Map" itemprop="url">Demand Heat Map</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Opower posted <a href="http://blog.opower.com/2014/09/ami-data-integration/">a heat map of hourly electricity demand</a> that I wanted to replicate for our data. </p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-11/my_usage_heatmap.png"><img src="http://www.thetrainingset.com/images/2014-11/my_usage_heatmap.png" /></a>
  <figcaption>Hourly heat map of our electricity usage.</figcaption>
</figure>
</center>

<p>This makes changes in hourly trends over the course of the year readily apparent, and even highlights differences day to day.  The 6am/7am peak is pretty clear, as are the evening hours in the summer.  Between midnight a 4am, the usage is clearly higher (deeper yellow) in the summer as well due to AC load.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-10-09T00:00:00-04:00"><a href="http://www.thetrainingset.com/articles/Storage-Model-Details">October 09, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Storage-Model-Details" rel="bookmark" title="Storage Model Details" itemprop="url">Storage Model Details</a></h1>
    
  </header>
  <div class="entry-content">
    <p>This post fills in some more details of the <a href="http://www.thetrainingset.com/articles/Intro-To-Storage-Model">demand-side storage model</a>.</p>

<p>In the last post I presented a flow chart of how the logic works but didn’t give a diagram of what the physical system might look like.  That’s below.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-10/physical_system.jpg"><img src="http://www.thetrainingset.com/images/2014-10/physical_system.jpg" /></a>
  <figcaption>Demand-side storage physical system.</figcaption>
</figure>
</center>

<p>I’ve illustrated the switch as being a separate component so we can see that electricity could bypass actually being inverted and stored (electricity from the grid sometimes goes directly to the demand).  In reality, the inverter/switch/charge controller would be one system.  This unit and the batteries would be the initial costs for the system.</p>

<h2 id="model-parameters">Model Parameters</h2>

<p>For electricity going straight to serve demand (not being stored first), there are essentially no additonal losses.  However, batteries only accept DC electricity, so we need an inverter to turn the AC off the grid to DC and back.  There are losses associated with this conversion, and the batteries themselves are lossy.  For now I’ve set these efficiencies as constants, but implemented them in functions so they could in the future get more sophisticated modeling (charging efficiency for batteries is dependent on depth of charge).  The nominal efficiency values are taken from <a href="http://www.amazon.com/Renewable-Efficient-Electric-Power-Systems/dp/0471280607/ref=sr_1_2?ie=UTF8&amp;qid=1412769771&amp;sr=8-2&amp;keywords=renewable+and+efficient+electric+power+systems">Renewable and Efficient Electric Power Systems by Gilbert Masters</a>.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">inverter_efficiency</span><span class="p">(</span><span class="n">direction</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s">&#39;charging&#39;</span><span class="p">:</span>
        <span class="n">eff</span> <span class="o">=</span> <span class="o">.</span><span class="mi">85</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s">&#39;discharging&#39;</span><span class="p">:</span>
        <span class="n">eff</span> <span class="o">=</span> <span class="o">.</span><span class="mi">85</span>
    <span class="k">return</span> <span class="n">eff</span>

<span class="k">def</span> <span class="nf">battery_efficiency</span><span class="p">(</span><span class="n">direction</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s">&#39;charging&#39;</span><span class="p">:</span>
        <span class="n">eff</span> <span class="o">=</span> <span class="o">.</span><span class="mi">85</span>
    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s">&#39;discharging&#39;</span><span class="p">:</span>
        <span class="n">eff</span> <span class="o">=</span> <span class="o">.</span><span class="mi">85</span>
    <span class="k">return</span> <span class="n">eff</span></code></pre></div>

<p>There are also several other system parameters that need to be initialized, including the size of the storage, costs, etc.  In future analyses these variables can be varied to assess the effects on costs and energy.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">inverter_controller_cost</span> <span class="o">=</span> <span class="mf">2000.</span> <span class="c"># ballpark</span>
<span class="n">storage_cost_perkWh</span> <span class="o">=</span> <span class="mf">200.</span> <span class="o">/</span> <span class="mf">1.2</span> <span class="c"># cost per kWh; amazon.com lead-acid deep cycle</span>
<span class="n">storage_size_kWh</span> <span class="o">=</span> <span class="mf">9.</span>  <span class="c"># storage size in kWh</span>
<span class="n">P_max_charge</span> <span class="o">=</span> <span class="p">(</span><span class="mf">100.</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">)</span> <span class="o">*</span> <span class="mf">12.</span> <span class="o">/</span> <span class="mf">1000.</span> <span class="c"># C/3 charge rate at 12 V (converted to kW)</span>
<span class="n">E_min_depth</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c"># maximum depth of discharge in percent</span>
<span class="n">E_min</span> <span class="o">=</span> <span class="n">E_min_depth</span> <span class="o">*</span> <span class="n">storage_size_kWh</span></code></pre></div>

<h2 id="results">Results</h2>

<p>Once the model has calculated all the energy flows for each hour over the course of the year, I calculate a set of key properties of the system behavior.  These results are shown in the table below.  These are the characteristics I’ll be interested in as the system parameters described above are varied (though I may modify this set).</p>

<ul>
  <li>’% Peak Demand Battery’: Percent of the total peak demand over the year served from the battery</li>
  <li>’% Peak kWh Shaved’: Percent of the total demand during peak hours removed from the grid</li>
  <li>’% Purchased During Off-Peak’: Percent of annual electricity purchased during off-peak hours</li>
  <li>’% Purchased During Peak’: Percent of annual electricity purchased during peak hours</li>
  <li>‘Annual System Eff’: Total annual demand divided by total annual electricity purchased</li>
  <li>‘Annual Var Cost’: Annual electricity cost</li>
  <li>‘Hours Battery Depleted’: Number of hours in the year that battery is drained to maximum depth of discharge</li>
  <li>‘Hours Battery Full’: Number of hours in the year that battery is fully charged</li>
  <li>‘Hours on Battery Only’: Number of hours in the year that demand is served by battery alone</li>
  <li>‘Initial Cost’: Initial system cost (inverter + batteries)</li>
  <li>‘Peak kWh Shaved’: Total electricity during peak hours removed from the grid</li>
  <li>‘Total kWh Purchased’: Total annual electricity purchased</li>
</ul>

<p>Below are some initial values from the simulation with a storage size of 9 kWh.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">{</span>   <span class="s">&#39;% Peak Demand Battery&#39;</span><span class="p">:</span> <span class="mf">0.62841144933029902</span><span class="p">,</span>
    <span class="s">&#39;% Peak kWh Shaved&#39;</span><span class="p">:</span> <span class="mf">0.54435814423603923</span><span class="p">,</span>
    <span class="s">&#39;% Purchased During Off-Peak&#39;</span><span class="p">:</span> <span class="mf">0.90852312473716113</span><span class="p">,</span>
    <span class="s">&#39;% Purchased During Peak&#39;</span><span class="p">:</span> <span class="mf">0.091476875262838833</span><span class="p">,</span>
    <span class="s">&#39;Annual System Eff&#39;</span><span class="p">:</span> <span class="mf">0.93101271339465896</span><span class="p">,</span>
    <span class="s">&#39;Annual Var Cost&#39;</span><span class="p">:</span> <span class="mf">572.33</span><span class="p">,</span>
    <span class="s">&#39;Hours Battery Depleted&#39;</span><span class="p">:</span> <span class="mi">1087</span><span class="p">,</span>
    <span class="s">&#39;Hours Battery Full&#39;</span><span class="p">:</span> <span class="mi">1863</span><span class="p">,</span>
    <span class="s">&#39;Hours on Battery Only&#39;</span><span class="p">:</span> <span class="mi">1169</span><span class="p">,</span>
    <span class="s">&#39;Initial Cost&#39;</span><span class="p">:</span> <span class="mf">3500.0</span><span class="p">,</span>
    <span class="s">&#39;Peak kWh Shaved&#39;</span><span class="p">:</span> <span class="mf">979.38848750000284</span><span class="p">,</span>
    <span class="s">&#39;Total kWh Purchased&#39;</span><span class="p">:</span> <span class="mf">8961.5382045414281</span>    <span class="p">}</span></code></pre></div>

<p>For these initial values, what stood out to me was that I removed 54% of the residence’s annual peak demand from the grid (this is the ‘% Peak kWh Shaved’).  This is the reason utilities might want to think about incentivizing residential customers to purchase grid-tied battery systems such as this (beyond just the time-of-use-pricing incentive itself).  I should say that the current model is agnostic to exactly which peak hours load is being shaved from - it just uses the battery first until it’s depleted and then switches to grid during peak hours.  Utilities would want to be a bit more sensitive to this, since their peak time-of-use currently starts at 10am weekdays in the summer but the actual “peak” won’t hit until around 4pm.  In the current model I’ve created, the battery is used up first so I wouldn’t be shaving peak load at 4pm.  This could be addressed with some logic that is a bit more clever than what I’ve currently got.</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-09-23T00:00:00-04:00"><a href="http://www.thetrainingset.com/articles/Intro-To-Storage-Model">September 23, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Intro-To-Storage-Model" rel="bookmark" title="Intro to Storage Model" itemprop="url">Intro to Storage Model</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Buying lead-acid batteries and switching to one of <a href="http://www.thetrainingset.com/articles/BGE-Pricing">BGE’s time-of-use pricing plans</a> may be a very good idea indeed.</p>

<p>BGE (and many other utilities in the U.S.) are now offering a time-of-use pricing plan in which the price you pay for electricity depends on what time of day or season you are purchasing it.  This is one of the so-called “demand-side strategies” that could help utilities reduce peak loads and prevent blackouts.  In a <a href="http://www.thetrainingset.com/articles/Should-I-Switch-To-TOU-Pricing">previous post</a>, I looked at whether it would make financial sense for me to switch over to one of these plans.</p>

<p>One can imagine taking further advantage of these plans by purchasing most or all electricity during off-peak (cheap) hours without having to buy much or any during peak hours.  In order to explore how this might work and how beneficial it would be, I built a model in Python that simulates the hourly energy flows for a home with lead-acid battery storage.</p>

<p>There are two sources of data that drive the model.  First, I’ve used one of the <a href="http://www.thetrainingset.com/articles/Feeding-The-Data-Monster">Green Button sample data files</a>, specifically the one for an inland, single-family residence.  This is an hourly electricity demand profile for the whole residential building for all of 2011.  Second, I’ve again used <a href="http://www.thetrainingset.com/articles/BGE-Pricing">BGE’s time-of-use pricing schemes</a> to determine peak hours and costs.  Some of the ideas are based on <a href="http://sel.columbia.edu/matlab-assignment-1">a Matlab assignment I worked on in grad school</a>.  While I no longer have access to the top tier journals (Elsevier is a capitalist racket), I did find a couple papers <a href="https://www.thlab.net/wp-content/uploads/publications/pub_19.pdf">here</a> and <a href="http://www.ecs.umass.edu/~irwin/smartcharge.pdf">here</a> that are using similar algorithms.</p>

<p>I’ve drawn out a flow chart to show how the model works.  During off-peak times, the demand is served directly from the grid and if the battery isn’t full, extra energy is purchased to charge the battery (there is a maximum rate at which this can occur).  During peak times, energy is first used out of the battery to serve the demand.  Only when the battery is drained (to an acceptable charge level, say 30%) is energy then purchased from the grid to serve demand directly.  No energy is purchased to charge the battery during peak hours.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-09/Demand-Side Storage Model Flow Chart.jpg"><img src="http://www.thetrainingset.com/images/2014-09/Demand-Side Storage Model Flow Chart.jpg" /></a>
  <figcaption>Flow chart for storage simulation.</figcaption>
</figure>
</center>

<p>If seeing the logic implemented in code would help, it’s below.  I’m not going to put all those functions below as well, needless to say they assign the proper values at each hour.  You could also get them from me on <a href="https://github.com/jtelszasz/demandside_storage">Github</a>.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s">&#39;USAGE&#39;</span><span class="p">])):</span>

        <span class="c"># If at the end of the time series, break out</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s">&#39;USAGE&#39;</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="c"># Peak hours operation</span>
        <span class="k">elif</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;period&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;peak&#39;</span> <span class="ow">or</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;period&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;int&#39;</span><span class="p">:</span>

            <span class="c"># If there is enough available in the battery, use it first</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s">&#39;storage_available&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">E_min</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;USAGE&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">results</span> <span class="o">=</span> <span class="n">peak_battery_only</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="c"># Otherwise, use up remainder in battery and then buy from grid</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">results</span> <span class="o">=</span> <span class="n">peak_battery_and_grid</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

        <span class="c"># Off-peak hours operation</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="c"># If the battery isn&#39;t full...</span>
            <span class="k">if</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;storage_available&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">storage_size_kWh</span><span class="p">:</span>

                <span class="c"># ... top off the battery if it is nearly full...</span>
                <span class="k">if</span> <span class="n">storage_size_kWh</span> <span class="o">-</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;storage_available&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">P_max_charge</span><span class="p">:</span>
                    <span class="n">results</span> <span class="o">=</span> <span class="n">offpeak_store_to_cap</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                
                <span class="c"># ... otherwise, charge as much as possible in one hour.</span>
                <span class="k">else</span><span class="p">:</span>                    
                    <span class="n">results</span> <span class="o">=</span> <span class="n">offpeak_store_partial</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            
            <span class="c"># If the battery is full, then it isn&#39;t necessary to purchase extra.</span>
            <span class="k">else</span><span class="p">:</span>                
                <span class="n">results</span> <span class="o">=</span> <span class="n">offpeak_battery_full</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span></code></pre></div>

<p>In the plot below, I’ve shown the behavior of the system for a typical summer day.  Peak hours are shaded.  As you can see, during off-peak hours additional energy is purchased in order to recharge the battery.  During peak hours, the battery is discharged preferentially before purchasing any peak-hour electricity in order to minimize cost.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-09/Daily_Energy_State_13-July-2011.png"><img src="http://www.thetrainingset.com/images/2014-09/Daily_Energy_State_13-July-2011.png" /></a>
  <figcaption>Model behavior for summer weekday, with peak period shaded in gray.</figcaption>
</figure>
</center>

<p>In the above plot there are two energy flows from the grid - one going to serve demand directly and the other to storage.  (There are actually three shown since I separate peak from off-peak, but you get the idea.)  To make a bit clearer how much energy is being purchased at each hour, I’ve summed those two quanities and plotted below.  Clearly in the off-peak hours, a bit extra is being purchased to charge the batteries.  During the first part of the peak period, nothing has to be purchased from the grid since the battery is serving the demand.  Once that is depleted, energy has to be purchased during the remainder of the peak period.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-09/Daily_Energy_Purchased_13-July-2011.png"><img src="http://www.thetrainingset.com/images/2014-09/Daily_Energy_Purchased_13-July-2011.png" /></a>
  <figcaption>Amount of energy purchased in storage model, with peak period shaded in gray.</figcaption>
</figure>
</center>

<p>It’s important to remember that the actual quantity of killowatt-hours of electricity purchased over the course of the year isn’t different than without storage, it’s just being purchased from the grid at different hours.  The consumer doesn’t need to modify their gluttonous behavior in order to make this work.  The benefit to the consumer is saving money, and the benefit to the utility is shaving peak loads.  </p>

<p>A bunch of questions are already popping up in my head:</p>

<ul>
  <li>What is the payback period for the battery system?</li>
  <li>How do the size of the battery and the peak-off-peak cost differential affect the payback period?</li>
  <li>What percent of hours/energy over the course of the year come through the storage system as opposed to directly from grid?</li>
  <li>How much storage is needed so that peak hour electricity is never purchased and how much does this cost?  What is the payback period?</li>
  <li>How does the cost of the system change with percent of peak-hour demand served by storage?</li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-09-22T00:00:00-04:00"><a href="http://www.thetrainingset.com/articles/Summer-Update">September 22, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Summer-Update" rel="bookmark" title="Summer Updates" itemprop="url">Summer Updates</a></h1>
    
  </header>
  <div class="entry-content">
    <p>It’s been a bit.  Work got busy, I got stalled and needed an IDE, and I developed a new model.</p>

<p>I didn’t have much time over the summer for this stuff.  My real job got pretty busy.  You don’t care about that though.</p>

<p>I did get a bit stalled.  As I’ve discussed previously, I’ve used iPython notebooks <a href="http://www.thetrainingset.com/the-work">quite a bit</a> for conducting analyses.  These only got me so far.  I’ve been working on a demand-side storage model to figure out how to take advantage of time-of-use pricing now available from utility companies.  While the notebooks work great for documenting analyses and creating plots, building a model is nearly impossible with them.  They aren’t really useful if you need multiple functions and scripts.  I was encountering bugs early on in building the model and couldn’t fix them.  It was frustrating.</p>

<p>This type of scientific computing really calls for an integrated development environment, or IDE.  It’s the one thing I’ve been missing since starting in with Python in lieu of Matlab.  An IDE gives you an interactive console, debugging capabilities, and an editor all in one program.  After reading a bit online, it seemed the two big ones for Python were <a href="http://www.eclipse.org">Eclipse</a> and <a href="http://www.jetbrains.com/pycharm">Pycharm</a>.  I started with Eclipse.  I couldn’t for the life of me get it working, something about the external libraries I was using wasn’t getting set up right.  I tried every way imaginable, but this was as frustrating as the original bugs in my code.  I switched to Pycharm, and pretty quickly was up and running.</p>

<p>Long story short, with an IDE in hand I found my bugs pretty quickly and finished building the model over a weekend.  I definitely recommend Pycharm or another IDE (even trying Eclipse, if you can get it working) for anything more complicated than simple models or exploratory data analysis.  You could even write all your functions and scripts for a model in an IDE and then switch to notebooks for analysis and results of the model.</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-08-12T00:00:00-04:00"><a href="http://www.thetrainingset.com/articles/Should-I-Switch-to-TOU-Pricing">August 12, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/Should-I-Switch-to-TOU-Pricing" rel="bookmark" title="Should I Switch to Time-of-Use Pricing?" itemprop="url">Should I Switch to Time-of-Use Pricing?</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Now that I’ve got BGE’s available <a href="http://www.thetrainingset.com/articles/BGE-Pricing">residential time-of-use plans</a>, I can evaluate whether I would save money by switching to one.</p>

<p>At each hour, I multiply the cost of electricty by the electricity usage for that hour.  To give an apples-to-apples comparison, I’m using the current 2014-2015 rates and assuming there weren’t any rate changes.  Also, I’m only looking at the actual cost of the commodity, not all the fees and rates (“riders”) that get tacked on.  Those additional costs add up to about 40% of your electricity bill, but since they’re not affected by the rate being charged for the electricity they’d be the same for each plan.  (In fact there was a change at on June 1, 2014, and there always will be changes.)  Again, the plans are “R” (basic), “RL” (time-of-use), and “EV” (aggressive time-of-use for electric vehicle owners).  The plot below shows the savings for the “RL” and “EV” plans as compared to what I would have paid with the “R” plan.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-08/My_Cost_Savings_TOU_Pricing.png"><img src="http://www.thetrainingset.com/images/2014-08/My_Cost_Savings_TOU_Pricing.png" /></a>
  <figcaption>Cost savings in U.S. dollars on monthly electricity bill compared to BGE residential "R" plan.</figcaption>
</figure>
</center>

<p>As a sanity check, the actual electricity cost for July on the “R” plan matches pretty closely what’s actually on our bill for July.  The bill is for 670 kWh at $0.08857/kWh for a total electricity supply cost of $59.34.  My hourly data shows 671.6 kWh usage for July (not sure why there is a difference here from the bill) and with the regular “R” plan at $.08975/kWh the supply cost would have been $57.87.  (As a sidenote, I’m unclear as to what what the difference is between the $.08857/kWh cost that is billed and the $.08975/kWh cost that is listed as the summer kWh prices as of June 1, 2014. <a href="http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Rates%20Information%20Documents/POLR_Rates_PTC_MiscCharges.pdf">This</a> lists both of those figures, but footnote 1 in the table in the upper right table doesn’t really explain the adjustment that well.)</p>

<p>In terms of savings with dynamic pricing plans, we’d pretty clearly benefit during the summer months.  At the new place during the week, we shut pretty much everything off during the day and only use air conditioning at night.  Moreover, our water heating is electric which leads to much higher peak electricity demands during early mornings and late evenings (particularly in the mornings when we shower).  We’d therefore be taking advantage of the cheaper electricity prices during off-peak hours.  At the old place our heat is part (large part) of the electricity load and during the winter and spring months, our thermostat was operational most hours of most days, and so there are less opportunities for savings since our load isn’t skewed towards off-peak hours.  Shown below again is our typical usage at the old (March 2014) and new (June 2014) apartments (original post is <a href="http://www.thetrainingset.com/articles/Mo-Apartment-Mo-Energy">here</a>).  </p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-08/Average_Days_New_and_Old_Apts.png"><img src="http://www.thetrainingset.com/images/2014-08/Average_Days_New_and_Old_Apts.png" /></a>
  <figcaption>Cost savings in U.S. dollars on monthly electricity bill compared to BGE residential "R" plan.</figcaption>
</figure>
</center>

<p>Shown below is the same monthly savings analysis, this time for the <a href="http://www.thetrainingset.com/articles/BGE-Pricing">Green Button sample data</a> for an inland single family residence.</p>

<center>
<figure>
  <a href="http://www.thetrainingset.com/images/2014-08/GB_Cost_Savings_TOU_Pricing.png"><img src="http://www.thetrainingset.com/images/2014-08/GB_Cost_Savings_TOU_Pricing.png" /></a>
  <figcaption>Cost savings in U.S. dollars on monthly electricity bill compared to BGE residential "R" plan.</figcaption>
</figure>
</center>

<p>The total annual savings for the sample set would be $27.23 for the “RL” plan compared to the regular “R” plan, and $60.25 for the “EV” plan.  These aren’t large chunks, but I think that’s probably by design.  BGE doesn’t want to lose an excessive amount of revenue by having people switch over to dynamic pricing plans.  At the same time, providing some incentive to switch, especially for electric vehicle owners (mind you this would be a different analysis), makes for a more reliable grid during the peak hours of the summer months by shaving or shifting load.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-08-03T00:00:00-04:00"><a href="http://www.thetrainingset.com/articles/BGE-Pricing">August 03, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://www.thetrainingset.com/about/" title="About Justin Elszasz">Justin Elszasz</a></span></span>
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://www.thetrainingset.com/articles/BGE-Pricing" rel="bookmark" title="BGE Residential Pricing Plans" itemprop="url">BGE Residential Pricing Plans</a></h1>
    
  </header>
  <div class="entry-content">
    <p>A quick blurb on a couple of pieces of the demand-side storage puzzle I’m working on.</p>

<p>First, turns out I’m going to use the Green Button sample data that I <a href="http://www.thetrainingset.com/articles/feeding-the-data-monster">previously found</a>.  They have <a href="http://services.greenbuttondata.org/sample-data.html">several of these datasets posted</a> that may be interesting for comparison later.  It took an embarassing amount of time to sort out my first time parsing an XML file.  Word of advice for you data/Python peoples: don’t use ElementTree, I used BeautifulSoup and it was much simpler.</p>

<figure>
  <a href="http://www.thetrainingset.com/images/2014-08/Green_Button_Sample_Inland_Single_Family_Daily.png"><img src="http://www.thetrainingset.com/images/2014-08/Green_Button_Sample_Inland_Single_Family_Daily.png" /></a>
  <figcaption>Green Button sample hourly data for inland single family residence, resampled to daily.</figcaption>
</figure>

<p>Definitely nice to have a full year worth of clean data.  You can also clearly see the bump up in summer usage from A/C loads.</p>

<p>In sorting out the demand-side storage question, I also took a look at what pricing schemes BGE has on offer.  They currently have the normal <a href="http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Services%20Rates%20and%20Tariffs/P3_SCH_R.pdf">residential plan (“R”)</a>, a <a href="http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Services%20Rates%20and%20Tariffs/P3_SCH_RL.pdf">residential time-of-use, or TOU, plan (“RL”)</a>, and a <a href="http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Services%20Rates%20and%20Tariffs/ScheduleEV.pdf">plan for electric vehicle customers (“EV”)</a>.  All of the actual costs for peak, off-peak, and intermediate are found <a href="http://www.bge.com/myaccount/billsrates/ratestariffs/electricservice/Electric%20Services%20Rates%20and%20Tariffs/Rdr_1.pdf">here</a>.  Obviously, there are a proverbial shit-ton of other nickel-and-dime tariffs, but since they’re paid per kilowatt-hour and aren’t tied to the actual price of electricity itself.  I’m assuming for the sake of comparison that the total number of kilowatt-hours you use is independent of the pricing plan you have. </p>

<p>Here’s what the three pricing plans look like for weekdays in summer and non-summer periods.</p>

<figure>
  <a href="http://www.thetrainingset.com/images/2014-08/BGE_Pricing_Summer.png"><img src="http://www.thetrainingset.com/images/2014-08/BGE_Pricing_Summer.png" /></a>
  <figcaption>BGE residential pricing plans, summer weekday.</figcaption>
</figure>

<figure>
  <a href="http://www.thetrainingset.com/images/2014-08/BGE_Pricing_Non-Summer.png"><img src="http://www.thetrainingset.com/images/2014-08/BGE_Pricing_Non-Summer.png" /></a>
  <figcaption>BGE residential pricing plans, non-summer weekday.</figcaption>
</figure>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="http://www.thetrainingset.com/page2" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="http://www.thetrainingset.com">1</a>
      
    </li>
    
      <li>
        
          <a href="http://www.thetrainingset.com/page2">2</a>
        
      </li>
    
      <li>
        
          <span class="current-page">3</span>
        
      </li>
    
      <li>
        
          <a href="http://www.thetrainingset.com/page4">4</a>
        
      </li>
    
      <li>
        
          <a href="http://www.thetrainingset.com/page5">5</a>
        
      </li>
    
  </ul>
  
    <a href="http://www.thetrainingset.com/page4" class="btn">Next</a>
  
</div><!-- /.pagination -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58835878-1', 'auto');
  ga('send', 'pageview');

</script>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Justin Elszasz. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://www.thetrainingset.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://www.thetrainingset.com/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58835878-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

          

</body>
</html>